
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation pour construire un homelab s√©curis√© et complet">
      
      
        <meta name="author" content="krhsaay">
      
      
      
        <link rel="prev" href="../vpn-remote-access/">
      
      
        <link rel="next" href="../ddns/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Reverse Proxy - Cyber Doc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#solutions-de-reverse-proxy-pour-un-homelab-de-cybersecurite" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-t√™te">
    <a href="../.." title="Cyber Doc" class="md-header__button md-logo" aria-label="Cyber Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cyber Doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reverse Proxy
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cyber Doc" class="md-nav__button md-logo" aria-label="Cyber Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Cyber Doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üèó Infrastructure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            üèó Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/proxmox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxmox VE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/stockage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stockage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/reseau/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    R√©seau & VLANs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/lxc-vs-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LXC vs VM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üåê R√©seau
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            üåê R√©seau
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashboards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS (Pi-hole, AdGuard...)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vpn-remote-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acc√®s VPN distant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Reverse Proxy
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Reverse Proxy
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des mati√®res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des mati√®res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#comparaison-technique-nginx-proxy-manager-traefik-et-authelia" class="md-nav__link">
    <span class="md-ellipsis">
      Comparaison technique : Nginx Proxy Manager, Traefik et Authelia
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comparaison technique : Nginx Proxy Manager, Traefik et Authelia">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principales-differences-nginx-proxy-manager-vs-traefik" class="md-nav__link">
    <span class="md-ellipsis">
      Principales diff√©rences Nginx Proxy Manager vs Traefik
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exemples-de-configurations-typiques" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configurations typiques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exemples de configurations typiques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reverse-proxy-avec-authentification-des-acces" class="md-nav__link">
    <span class="md-ellipsis">
      Reverse proxy avec authentification des acc√®s
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#acces-securise-aux-services-internes-depuis-lexterieur" class="md-nav__link">
    <span class="md-ellipsis">
      Acc√®s s√©curis√© aux services internes depuis l‚Äôext√©rieur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#separation-des-zones-reseau-segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      S√©paration des zones r√©seau (segmentation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtrage-et-supervision-des-requetes" class="md-nav__link">
    <span class="md-ellipsis">
      Filtrage et supervision des requ√™tes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fonctionnalites-de-securite-avancees-ldap-oauth2-sso-2fa" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctionnalit√©s de s√©curit√© avanc√©es (LDAP, OAuth2, SSO, 2FA)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fonctionnalit√©s de s√©curit√© avanc√©es (LDAP, OAuth2, SSO, 2FA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-ldapoauth2-pour-lauthentification-centralisee" class="md-nav__link">
    <span class="md-ellipsis">
      Int√©gration LDAP/OAuth2 pour l‚Äôauthentification centralis√©e
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protection-contre-les-attaques-par-force-brute" class="md-nav__link">
    <span class="md-ellipsis">
      Protection contre les attaques par force brute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentification-unifiee-et-multi-facteurs-sso-mfa" class="md-nav__link">
    <span class="md-ellipsis">
      Authentification unifi√©e et multi-facteurs (SSO &amp; MFA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ddns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS Dynamique (DDNS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../torrent-vpn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VPN et torrents
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üß∞ Outils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            üß∞ Outils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/gestion-fichiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestion de fichiers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/gestion-mots-de-passe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mots de passe (Vaultwarden...)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/favoris/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Favoris et veille (Hoarder)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker & Portainer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üì∫ M√©dia
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            üì∫ M√©dia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streaming (Jellyfin, Plex)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/overseerr-sonarr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sonarr, Overseerr
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/clients-download.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    T√©l√©chargements (qBittorrent)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/photos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Photos (Immich)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üè† Domotique
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            üè† Domotique
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domotique/homeassistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home Assistant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domotique/zigbee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee2MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domotique/surveillance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vid√©osurveillance (Frigate)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üìä Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            üìä Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grafana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/prometheus-influx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus / InfluxDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/netalert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NetAlertX
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üîê S√©curit√©
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            üîê S√©curit√©
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/vaultwarden/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vaultwarden
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/authentification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentification MFA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/siem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SIEM (Wazuh, ELK...)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/segmentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Segmentation & honeypots
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üß™ DIY
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            üß™ DIY
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diy/esp32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ESP32 & capteurs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diy/octoprint.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OctoPrint & impression 3D
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diy/n8n.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    N8N Automatisation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="solutions-de-reverse-proxy-pour-un-homelab-de-cybersecurite"><strong>Solutions de Reverse Proxy pour un Homelab de Cybers√©curit√©</strong><a class="headerlink" href="#solutions-de-reverse-proxy-pour-un-homelab-de-cybersecurite" title="Permanent link">&para;</a></h1>
<p>Dans un homelab orient√© cybers√©curit√©, les reverse proxies jouent un r√¥le crucial pour exposer en toute s√©curit√© des services internes vers l‚Äôext√©rieur. Ils permettent de centraliser la gestion des acc√®s, d‚Äôappliquer des r√®gles de s√©curit√© (authentification, filtrage) et de segmenter le r√©seau. Nous allons comparer techniquement  <strong>Nginx Proxy Manager</strong>,  <strong>Traefik</strong>  et  <strong>Authelia</strong>, et examiner des exemples de configuration typiques ainsi que des cas d‚Äôusage et fonctionnalit√©s de s√©curit√© avanc√©es adapt√©s √† un homelab.</p>
<h2 id="comparaison-technique-nginx-proxy-manager-traefik-et-authelia"><strong>Comparaison technique : Nginx Proxy Manager, Traefik et Authelia</strong><a class="headerlink" href="#comparaison-technique-nginx-proxy-manager-traefik-et-authelia" title="Permanent link">&para;</a></h2>
<p><strong>Nginx Proxy Manager (NPM)</strong>  est une interface web conviviale permettant de piloter un serveur Nginx (bas√© sur OpenResty) en arri√®re-plan. Il offre une gestion simplifi√©e des h√¥tes proxy avec une GUI intuitive : on peut facilement ajouter un  <strong>h√¥te proxy</strong>  (domaine, adresse cible et port) via une interface web, g√©rer les certificats SSL Let‚Äôs Encrypt en un clic, d√©finir des acc√®s restreints, etc. Par d√©faut, NPM prend en charge les fonctionnalit√©s de base communes √† Traefik, comme la gestion automatique des certificats SSL/TLS (via Let‚Äôs Encrypt et divers fournisseurs DNS) et le proxying de multiples protocoles (HTTP, HTTPS, mais aussi TCP/UDP via les streams Nginx)  . Son atout principal est la simplicit√© : tout se fait via l‚ÄôUI, sans n√©cessiter d‚Äô√©diter des fichiers de configuration. NPM g√®re les utilisateurs multiples avec r√¥les et journalisation des modifications (audit logs) int√©gr√©s, ce qui permet une administration partag√©e et trac√©e ‚Äì une fonctionnalit√© que Traefik n‚Äôa pas nativement  . Techniquement, NPM stocke sa configuration (h√¥tes, utilisateurs, certificats‚Ä¶) dans une base de donn√©es (SQLite ou MariaDB/MySQL)  . Cela signifie que la configuration persiste et peut √™tre sauvegard√©e, mais introduit aussi un point d‚Äô√©chec potentiel (corruption de DB). NPM √©tant un frontal √† Nginx, il b√©n√©ficie des performances reconnues de Nginx (√©crites en C, tr√®s optimis√©es) ‚Äì on observe en effet que Traefik est  <strong>un peu moins rapide</strong>  que Nginx/OpenResty en proxy HTTP, m√™me si l‚Äô√©cart est mineur dans le contexte d‚Äôun homelab  . En contrepartie, NPM est moins flexible sur certains points avanc√©s : par exemple, l‚Äôinterface ne permet de d√©finir qu‚Äôun seul serveur de destination par host (pas de load-balancing multiple en GUI)  , et une erreur de configuration peut rendre Nginx indisponible (toute la configuration Nginx √©choue si un host est mal d√©fini), interrompant  <strong>tous</strong>  les sites jusqu‚Äô√† correction  . NPM convient bien aux d√©butants ou √† ceux qui privil√©gient la rapidit√© de mise en place via une interface graphique  .</p>
<p><strong>Traefik</strong>  est un reverse proxy moderne, pens√© pour les environnements dynamiques (Docker, Kubernetes). Contrairement √† NPM, Traefik privil√©gie la configuration  <strong>‚Äúas code‚Äù</strong>  : pas de v√©ritable GUI d‚Äôadministration (son tableau de bord web est  <strong>en lecture seule</strong>, servant √† visualiser la config active)  . La configuration s‚Äôeffectue via des fichiers YAML statiques/dynamiques ou via des  <strong>labels Docker</strong>  attach√©s aux conteneurs ‚Äì ce qui permet une  <strong>d√©couverte automatique</strong>  des services. En effet, Traefik peut surveiller l‚ÄôAPI Docker ou Kubernetes et cr√©er les routes proxy correspondantes √† la vol√©e en fonction des labels, sans red√©marrage du conteneur Traefik  . Cette capacit√© d‚Äô<strong>auto-discovery</strong>  est un avantage dans un homelab tr√®s containeris√© : d√©ployer un nouveau service Docker avec les bons labels suffit pour l‚Äôexposer sur le domaine voulu, Traefik configurant automatiquement le routage  . Traefik int√®gre nativement le support de Let‚Äôs Encrypt (ACME) : il peut g√©n√©rer et renouveler automatiquement les certificats SSL, y compris via des challenges DNS (il suffit de fournir les tokens API des DNS providers dans la configuration)  . Il supporte pleinement le  <strong>load balancing</strong>  entre plusieurs instances d‚Äôun service (round-robin, etc.) et des  <strong>middlewares</strong>  puissants pour modifier ou filtrer les requ√™tes (r√©√©critures d‚ÄôURL, redirections, rate limiting, IP whitelisting, authentification basique, injection de headers de s√©curit√©, etc.)  . Traefik ne n√©cessite pas de base de donn√©es ‚Äì sa configuration vit en m√©moire et se met √† jour dynamiquement ‚Äì ce qui le rend moins sujet √† des corruptions et permet des changements √† chaud sans interruption  . En cas de configuration invalide, seul l‚Äô√©l√©ment concern√© √©chouera tandis que le reste du proxy continue de fonctionner, ce qui am√©liore la  <strong>robustesse</strong>  de l‚Äôensemble par rapport √† Nginx (o√π une erreur peut bloquer tout le service)  . C√¥t√© performances, Traefik (√©crit en Go) est l√©g√®rement moins performant que Nginx en termes de latence pure ou de d√©bit, mais pour un usage homelab les diff√©rences sont g√©n√©ralement n√©gligeables  . Traefik s‚Äôadresse plut√¥t aux utilisateurs avanc√©s ou aux environnements n√©cessitant une forte automatisation et int√©gration CI/CD, au prix d‚Äôune  <strong>courbe d‚Äôapprentissage</strong>  plus √©lev√©e (compr√©hension des routers, services, middlewares, labels)  . En r√©sum√©,  <em>Traefik excelle en environnement containeris√© dynamique</em>, tandis que  <em>Nginx Proxy Manager brille par sa simplicit√© et son interface utilisateur</em>.</p>
<p><strong>Authelia</strong>, quant √† lui, n‚Äôest pas un reverse proxy mais un service  <strong>d‚Äôauthentification et d‚Äôautorisation</strong>  open-source con√ßu pour se  <strong>coupler aux reverse proxies</strong>  existants (Nginx, Traefik, Caddy, HAProxy, etc.)  . Authelia agit comme un  <strong>portail d‚Äôauthentification</strong>  √† facteurs multiples (MFA) fournissant du  <strong>Single Sign-On (SSO)</strong>  pour vos applications web auto-h√©berg√©es  . En pratique, il s‚Äôint√®gre via le m√©canisme de  <strong>‚Äúforward authentication‚Äù</strong>  : le reverse proxy est configur√© pour interroger Authelia √† chaque requ√™te entrante non authentifi√©e. Authelia valide si l‚Äôutilisateur a une session active (cookie SSO) ou demande √† ce qu‚Äôil se connecte via son  <strong>portail web s√©curis√©</strong>. Une fois l‚Äôauthentification effectu√©e (avec mot de passe + second facteur possible), Authelia informe le proxy que la requ√™te peut passer, et l‚Äôutilisateur acc√®de alors au service cible  . Authelia dispose d‚Äôune interface web pour le login des utilisateurs (portal web) mais pas d‚Äôune interface ‚Äúadmin‚Äù √©quivalente √† NPM/Traefik ‚Äì sa configuration se fait via un fichier YAML. Il supporte en backend les utilisateurs d√©finis dans un fichier YAML ou dans un annuaire  <strong>LDAP/Active Directory</strong>, ainsi que la possibilit√© d‚Äô√™tre  <strong>fournisseur OpenID Connect (OIDC)</strong>  . Ce dernier point signifie qu‚ÄôAuthelia peut s‚Äôint√©grer dans un √©cosyst√®me OAuth2/OIDC : par exemple, des applications supportant OIDC peuvent d√©leguer l‚Äôauthentification √† Authelia, ou Authelia peut utiliser des  <strong>en-t√™tes ‚Äútrusted‚Äù</strong>  pour propager l‚Äôidentit√© de l‚Äôutilisateur aux applications web  . Authelia se d√©ploie facilement en Docker (image &lt;20‚ÄØMo) et consomme peu de ressources (quelques dizaines de Mo de RAM)  ‚Äì int√©ressant pour un homelab o√π on cherche √† minimiser l‚Äôempreinte. Il n√©cessite g√©n√©ralement un  <strong>stockage</strong>  pour les donn√©es de session (Redis par exemple pour la haute dispo, sinon en m√©moire ou SQLite) et peut utiliser une base (SQLite, MySQL‚Ä¶) pour stocker son √©tat (sessions, pr√©f√©rences) si on le souhaite  . Authelia compl√®te donc Traefik ou Nginx Proxy en ajoutant une couche d‚Äôauthentification forte centralis√©e.  <strong>√Ä noter</strong>  : Nginx Proxy Manager ne propose pas nativement l‚Äôint√©gration d‚ÄôAuthelia dans son interface, contrairement √† Traefik o√π la documentation officielle fournit des exemples de configuration pour Authelia  . Il est tout de m√™me possible d‚Äôutiliser Authelia avec Nginx Proxy Manager en ajoutant des directives personnalis√©es dans la configuration Nginx (voir plus loin).</p>
<h3 id="principales-differences-nginx-proxy-manager-vs-traefik"><strong>Principales diff√©rences Nginx Proxy Manager vs Traefik</strong><a class="headerlink" href="#principales-differences-nginx-proxy-manager-vs-traefik" title="Permanent link">&para;</a></h3>
<p>Pour synth√©tiser la comparaison NPM vs Traefik dans un contexte homelab :</p>
<ul>
<li>
<p><strong>Interface &amp; configuration</strong> : NPM offre une  <strong>interface web compl√®te</strong>  pour tout configurer (domaine, upstream, certificat, authentification‚Ä¶), conviviale pour les d√©butants. Traefik propose seulement un  <strong>tableau de bord</strong>  de visualisation, la configuration se fait par  <strong>fichiers</strong>  ou  <strong>labels</strong>  dans une approche Infrastructure-as-Code  . Modifier une config Traefik exige donc de conna√Ætre sa syntaxe (YAML/labels) mais permet une automatisation et une mise en version du code, l√† o√π NPM privil√©gie la simplicit√© point&amp;click.</p>
</li>
<li>
<p><strong>Gestion des utilisateurs et des droits</strong> : NPM g√®re nativement des comptes multiples avec r√¥les (admin, viewer) et garde un  <strong>journal d‚Äôaudit</strong>  des changements  . Traefik n‚Äôa pas d‚Äôutilisateurs multiples ni d‚Äôauthentification sur son dashboard par d√©faut (il faut ajouter une auth basique manuellement si on veut prot√©ger l‚Äôacc√®s √† l‚ÄôUI)  . Dans un homelab √† plusieurs administrateurs ou pour tracer les modifications, NPM marque donc un point.</p>
</li>
<li>
<p><strong>Persistance de la configuration</strong> : NPM stocke sa configuration dans une base de donn√©es (fichiers SQLite ou serveur MariaDB)  , ce qui assure une persistance m√™me apr√®s red√©marrage du conteneur. Traefik n‚Äôa pas de DB ‚Äì les configs statiques/dynamiques sont recharg√©es en m√©moire √† chaque d√©marrage et peuvent √™tre mises √† jour √† chaud. Moins de risque de corruption mais il faut penser √† sauvegarder manuellement les fichiers de configuration Traefik/les commandes de d√©ploiement Docker-Compose (alors que NPM n√©cessite de sauvegarder son volume ou dump SQL).</p>
</li>
<li>
<p><strong>Routing et d√©couvertes de services</strong> : Traefik est con√ßu pour la  <strong>d√©couverte automatique</strong>  des services dans Docker/K8s ‚Äì tout conteneur lanc√© avec les bons labels est automatiquement pris en charge (sous r√©serve qu‚Äôil soit dans le r√©seau Docker de Traefik)  . NPM ne d√©couvre rien automatiquement : il faut d√©clarer chaque host via l‚ÄôUI (bien qu‚Äôil soit possible de scripter l‚ÄôAPI ou d‚Äôutiliser Nginx Proxy  <em>Companion</em>  pour du Docker g√©n√©rique, ce n‚Äôest pas int√©gr√© dans NPM). Pour un homelab tr√®s dynamique (services √©ph√©m√®res, scaling), Traefik se montre plus pratique.</p>
</li>
<li>
<p><strong>Flexibilit√© des fonctionnalit√©s</strong> : Traefik embarque des  <strong>middlewares modulaires</strong>  activables facilement (ex :  traefik.http.middlewares.rateLimit,  ...redirectscheme,  ...auth  etc.), ainsi qu‚Äôun √©cosyst√®me de  <strong>plugins</strong>  officiel pour √©tendre ses capacit√©s (ex : plugin Fail2Ban,  <strong>CrowdSec</strong>, ModSecurity WAF, etc.)  . Nginx (et donc NPM) est tr√®s puissant aussi, mais ajouter par exemple un WAF ModSecurity ou un syst√®me de ban IP n√©cessite de modifier la configuration avanc√©e ou d‚Äôutiliser des conteneurs compl√©mentaires ‚Äì ce n‚Äôest pas ‚Äúplug and play‚Äù via l‚Äôinterface. En contrepartie, Nginx permet un  <strong>contr√¥le tr√®s fin</strong>  de chaque d√©tail (directives SSL/TLS, tuning performance, modules tiers) en √©ditant la config, tandis que Traefik fait plus de choses automatiquement mais offre moins de contr√¥le granulaire que du pur Nginx  .</p>
</li>
<li>
<p><strong>Performances</strong> : Nginx/OpenResty offre en g√©n√©ral un meilleur throughput et une latence un peu plus faible que Traefik dans les m√™mes conditions  . Pour un homelab avec quelques services, cette diff√©rence est  <strong>peu perceptible</strong>  . Nginx excelle sous forte charge ou pour servir du contenu static/cache, tandis que Traefik consomme un peu plus de CPU/RAM pour son moteur Go mais reste tout √† fait adapt√© √† des charges modestes. On pourra retenir que si l‚Äôon cherche √† optimiser chaque pourcent de performance, Nginx a l‚Äôavantage, mais Traefik apporte d‚Äôautres b√©n√©fices (auto-config) qui peuvent primer en homelab.</p>
</li>
</ul>
<p>En r√©sum√©,  <strong>NPM</strong>  est id√©al pour d√©marrer rapidement et administrer simplement un reverse proxy multi-sites via une interface graphique, avec la robustesse √©prouv√©e de Nginx.  <strong>Traefik</strong>  convient aux setups plus automatis√©s ou complexes, particuli√®rement si tout tourne en conteneurs, en offrant une int√©gration native avec Docker/K8s et des fonctionnalit√©s avanc√©es (middlewares, load balancing) au prix d‚Äôune configuration par code. Dans bien des cas, le choix d√©pendra donc de votre aisance technique et des besoins sp√©cifiques du lab (simplicit√© vs. flexibilit√©)  . Notons qu‚Äô<strong>Authelia</strong>  n‚Äôest pas en concurrence directe avec ces proxies mais vient plut√¥t les compl√©ter pour la couche authentification/SSO multi-facteurs.</p>
<h2 id="exemples-de-configurations-typiques"><strong>Exemples de configurations typiques</strong><a class="headerlink" href="#exemples-de-configurations-typiques" title="Permanent link">&para;</a></h2>
<p>Passons en revue quelques configurations typiques qu‚Äôon peut mettre en place avec ces outils, dans un homelab, pour renforcer la s√©curit√© et le confort d‚Äôutilisation.</p>
<h3 id="reverse-proxy-avec-authentification-des-acces"><strong>Reverse proxy avec authentification des acc√®s</strong><a class="headerlink" href="#reverse-proxy-avec-authentification-des-acces" title="Permanent link">&para;</a></h3>
<p>Un usage courant en homelab est de  <strong>prot√©ger l‚Äôacc√®s aux services internes par une authentification</strong>. Plusieurs approches existent :</p>
<ul>
<li>
<p><strong>Authentification basique (Basic Auth)</strong>  : C‚Äôest la m√©thode la plus simple, int√©gr√©e nativement.  <strong>Nginx Proxy Manager</strong>  permet de cr√©er des  <em>Access Lists</em>  contenant des utilisateurs (login/mot de passe HTTP Basic) et de les associer √† un host. Par exemple, on peut d√©finir une liste ‚ÄúAdmin seulement‚Äù avec utilisateur  admin  et mot de passe, puis la lier √† l‚Äôh√¥te proxy d‚Äôune application sensible ‚Äì NPM forcera alors la saisie de ce login/mot de passe pour acc√©der au service.  <strong>Traefik</strong>  offre un middleware de basic auth √©quivalent : on peut d√©finir dans les labels Docker  traefik.http.middlewares.monauth.basicauth.users=utilisateur:motdepasse_hash√©  et attacher ce middleware √† un router  . Dans le fichier Compose pr√©sent√© plus haut, on voit un exemple prot√©geant le dashboard Traefik par basic auth (utilisateur  <em>admin</em>, mot de passe  <em>password</em>) via ces labels  . Cette m√©thode a l‚Äôavantage d‚Äô√™tre simple mais n‚Äôoffre pas de SSO (chaque service a ses propres identifiants) ni de second facteur.</p>
</li>
<li>
<p><strong>Authentification avanc√©e avec Authelia (SSO)</strong>  : Pour un homelab cybers√©curit√©, mettre en place Authelia apporte une couche  <strong>SSO √† double facteur</strong>  pour tous les services web. La configuration consiste √† d√©ployer le service Authelia (Docker) et √† le  <strong>d√©clarer dans le reverse proxy</strong>  en tant que provider d‚Äôauthentification. Concr√®tement, avec  <strong>Nginx (Proxy Manager)</strong>  cela se fait en ajoutant des directives custom Nginx dans l‚Äôonglet ‚ÄúAdvanced‚Äù de chaque host √† prot√©ger. Par exemple, on ins√©rera dans la config du host :</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">auth_request</span><span class="w"> </span><span class="s">/authelia</span><span class="p">;</span>
<span class="k">auth_request_set</span><span class="w">  </span><span class="nv">$target_url</span><span class="w">  </span><span class="nv">$scheme://$http_host$request_uri</span><span class="p">;</span>
<span class="k">error_page</span><span class="w">  </span><span class="mi">401</span><span class="w">  </span><span class="p">=</span><span class="mi">302</span><span class="w">  </span><span class="s">https://auth.mondomaine.com/?rd=</span><span class="nv">$target_url</span><span class="p">;</span>
</code></pre></div>
<ul>
<li>
<p><em>(ainsi que d‚Äôautres directives pour passer les en-t√™tes d‚Äôutilisateur)</em>  . Ces instructions signifient : ‚Äúpour chaque requ√™te sur ce host, interroger l‚ÄôURL  /authelia  (endpoint interne qui pointe vers Authelia) ‚Äì si Authelia renvoie 401 non autoris√©, alors rediriger (302) le client vers la page de login Authelia  auth.mondomaine.com  en lui passant l‚ÄôURL cible dans  rd  (redirect)‚Äù. Authelia, une fois l‚Äôutilisateur authentifi√©, redirigera celui-ci vers l‚ÄôURL initiale, qui cette fois sera accept√©e (car munie du cookie de session). Ce m√©canisme utilise le  <strong>directive auth_request de Nginx</strong>pour interroger un serveur d‚Äôauth externe  .</p>
<p>Du c√¥t√©  <strong>Traefik</strong>, l‚Äôint√©gration est tout aussi simple via un  <strong>middleware de type ForwardAuth</strong>. On peut d√©clarer, par exemple dans un fichier dynamique ou via labels, un middleware pointant vers Authelia :</p>
</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="k">traefik.http.middlewares.authelia.forwardAuth.address:</span><span class="w"> </span><span class="s">&quot;http://authelia:9091/api/authz/forward-auth&quot;</span>
<span class="s">traefik.http.middlewares.authelia.forwardAuth.trustForwardHeader:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="s">traefik.http.middlewares.authelia.forwardAuth.authResponseHeaders:</span><span class="w"> </span><span class="s">&quot;Remote-User,Remote-Groups,Remote-Email&quot;</span>
</code></pre></div>
-   Ensuite, pour chaque service √† prot√©ger, on attache ce middleware  <em>authelia</em>  au router Traefik concern√© (par ex. label  traefik.http.routers.monservice.middlewares=authelia@docker)  . Ainsi, toute requ√™te passera par Authelia qui d√©cidera de la laisser passer ou non. Authelia fournit en plus des en-t√™tes (Remote-User, Remote-Groups, etc.) que le proxy peut forwarder √† l‚Äôapplication cible si besoin  (utile si l‚Äôapplication veut conna√Ætre l‚Äôutilisateur logg√©).</p>
<div class="codehilite"><pre><span></span><code><span class="nx">_Dans</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">pratique_</span><span class="p">,</span><span class="w"> </span><span class="nx">une</span><span class="w"> </span><span class="nx">configuration</span><span class="w"> </span><span class="nx">compl√®te</span><span class="w"> </span><span class="nx">implique</span><span class="w"> </span><span class="nx">aussi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">d√©finition</span><span class="w"> </span><span class="nx">des</span><span class="w"> </span><span class="nx">r√®gles</span><span class="w"> </span><span class="nx">d</span><span class="err">‚Äô</span><span class="nx">acc√®s</span><span class="w"> </span><span class="nx">dans</span><span class="w"> </span><span class="nx">Authelia</span><span class="w"> </span><span class="p">(</span><span class="nx">fichier</span><span class="w"> </span><span class="nx">YAML</span><span class="w">  </span><span class="nx">_access_control_</span><span class="p">:</span><span class="w"> </span><span class="nx">quels</span><span class="w"> </span><span class="nx">domaines</span><span class="w"> </span><span class="nx">exigent</span><span class="w"> </span><span class="mi">2</span><span class="nx">FA</span><span class="p">,</span><span class="w"> </span><span class="nx">lesquels</span><span class="w"> </span><span class="nx">sont</span><span class="w"> </span><span class="nx">en</span><span class="w"> </span><span class="nx">acc√®s</span><span class="w"> </span><span class="nx">libre</span><span class="w"> </span><span class="nx">ou</span><span class="w"> </span><span class="mi">1</span><span class="nx">FA</span><span class="p">)</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">cr√©ation</span><span class="w"> </span><span class="nx">des</span><span class="w"> </span><span class="nx">utilisateurs</span><span class="w"> </span><span class="p">(</span><span class="nx">fichier</span><span class="w"> </span><span class="nx">ou</span><span class="w"> </span><span class="nx">connexion</span><span class="w"> </span><span class="nx">√†</span><span class="w"> </span><span class="nx">un</span><span class="w"> </span><span class="nx">LDAP</span><span class="p">),</span><span class="w"> </span><span class="nx">et</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">s√©curisation</span><span class="w"> </span><span class="nx">du</span><span class="w"> </span><span class="nx">portail</span><span class="w"> </span><span class="nx">Authelia</span><span class="w"> </span><span class="nx">lui</span><span class="o">-</span><span class="nx">m√™me</span><span class="w"> </span><span class="nx">via</span><span class="w"> </span><span class="nx">HTTPS</span><span class="p">.</span><span class="w"> </span><span class="nx">Une</span><span class="w"> </span><span class="nx">fois</span><span class="w"> </span><span class="nx">en</span><span class="w"> </span><span class="nx">place</span><span class="p">,</span><span class="w"> </span><span class="nx">ce</span><span class="w"> </span><span class="nx">setup</span><span class="w"> </span><span class="nx">offre</span><span class="w"> </span><span class="nx">une</span><span class="w">  </span><span class="o">**</span><span class="nx">authentification</span><span class="w"> </span><span class="nx">unifi√©e</span><span class="o">**</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="nx">l</span><span class="err">‚Äô</span><span class="nx">utilisateur</span><span class="w"> </span><span class="nx">se</span><span class="w"> </span><span class="nx">connecte</span><span class="w"> </span><span class="nx">une</span><span class="w"> </span><span class="nx">fois</span><span class="w"> </span><span class="nx">sur</span><span class="w"> </span><span class="nx">Authelia</span><span class="w"> </span><span class="nx">et</span><span class="w"> </span><span class="nx">acc√®de</span><span class="w"> </span><span class="nx">ensuite</span><span class="w"> </span><span class="nx">√†</span><span class="w"> </span><span class="nx">plusieurs</span><span class="w"> </span><span class="nx">services</span><span class="w"> </span><span class="nx">sans</span><span class="w"> </span><span class="nx">se</span><span class="w"> </span><span class="nx">reconnecter</span><span class="w"> </span><span class="p">(</span><span class="nx">SSO</span><span class="p">)</span><span class="w"> </span><span class="nx">tant</span><span class="w"> </span><span class="nx">que</span><span class="w"> </span><span class="nx">sa</span><span class="w"> </span><span class="nx">session</span><span class="w"> </span><span class="nx">est</span><span class="w"> </span><span class="nx">valide</span><span class="w">  </span><span class="p">.</span><span class="w"> </span><span class="nx">On</span><span class="w"> </span><span class="nx">b√©n√©ficie</span><span class="w"> </span><span class="nx">aussi</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">fonctionnalit√©s</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">s√©curit√©</span><span class="w"> </span><span class="nx">comme</span><span class="w"> </span><span class="nx">le</span><span class="w"> </span><span class="nx">deuxi√®me</span><span class="w"> </span><span class="nx">facteur</span><span class="w"> </span><span class="p">(</span><span class="nx">TOTP</span><span class="p">,</span><span class="w"> </span><span class="nx">Webauthn</span><span class="err">‚Ä¶</span><span class="p">)</span><span class="w"> </span><span class="nx">et</span><span class="w"> </span><span class="nx">la</span><span class="w"> </span><span class="nx">protection</span><span class="w"> </span><span class="nx">anti</span><span class="o">-</span><span class="nx">brute</span><span class="o">-</span><span class="nx">force</span><span class="w"> </span><span class="nx">fournie</span><span class="w"> </span><span class="nx">par</span><span class="w"> </span><span class="nx">Authelia</span><span class="w"> </span><span class="p">(</span><span class="nx">voir</span><span class="w"> </span><span class="nx">section</span><span class="w"> </span><span class="nx">S√©curit√©</span><span class="p">).</span>
</code></pre></div>

<ul>
<li><strong>Restriction par adresse IP (IP whitelisting)</strong>  : Une m√©thode plus simple, qui peut compl√©ter les pr√©c√©dentes, est de  <strong>limiter l‚Äôacc√®s √† certains services par IP source</strong>  (par exemple, accessibles uniquement depuis le LAN du homelab ou via VPN). Nginx Proxy Manager permet de d√©finir dans les Access Lists des plages IP autoris√©es ou refus√©es. Traefik propose un middleware  IPWhiteList  o√π l‚Äôon sp√©cifie des subnets autoris√©s. Dans l‚Äôextrait de configuration Traefik pr√©c√©dent, on voit par exemple un middleware  local-ipwhitelist@file  pouvant √™tre appliqu√© √† un router pour  <strong>n‚Äôaccepter que les IP priv√©es</strong>  . Ce type de filtrage est tr√®s utile pour, par exemple, exposer l‚Äôinterface d‚Äôadministration d‚Äôun NAS ou d‚Äôune VM uniquement aux IP locales, tout en ayant d‚Äôautres services du proxy accessibles depuis Internet. Cela segmente l‚Äôacc√®s sans n√©cessiter d‚Äôauthentification pour les services purement internes.</li>
</ul>
<p>En combinant ces m√©thodes, on peut obtenir un niveau de s√©curit√© granulaire adapt√© √† chaque service du homelab. Par exemple, un wiki personnel pourrait √™tre accessible uniquement depuis le LAN (filtrage IP), tandis qu‚Äôune application plus critique (ex: interface domotique) serait expos√©e sur Internet mais prot√©g√©e par Authelia (login + 2FA), et un service moins sensible pourrait se contenter d‚Äôune auth basique.</p>
<h3 id="acces-securise-aux-services-internes-depuis-lexterieur"><strong>Acc√®s s√©curis√© aux services internes depuis l‚Äôext√©rieur</strong><a class="headerlink" href="#acces-securise-aux-services-internes-depuis-lexterieur" title="Permanent link">&para;</a></h3>
<p>L‚Äôun des buts du reverse proxy dans un homelab est de  <strong>rendre accessibles depuis l‚Äôext√©rieur</strong>  (Internet) certaines applications internes, de mani√®re s√©curis√©e. Voici les bonnes pratiques de configuration pour cet usage :</p>
<ul>
<li>
<p><strong>Placer le proxy en ‚Äúfrontale‚Äù s√©curis√©e</strong>  : Le reverse proxy sert de  <strong>point d‚Äôentr√©e unique</strong>. On configure le routeur/pare-feu de la box internet pour ne forward que les ports 80/443 vers la machine h√©bergeant le proxy (id√©alement uniquement 443, voir HTTPS ci-dessous). Ainsi,  <em>aucun service interne n‚Äôest expos√© en direct</em>  ‚Äì ils sont tous sur des IP priv√©es non routables, seul le proxy (dans une DMZ ou VLAN d√©di√© de pr√©f√©rence) est joignable depuis Internet. Cette configuration limite la surface d‚Äôattaque : un attaquant ne peut cibler que le proxy lui-m√™me, et non chaque service individuellement.</p>
</li>
<li>
<p><strong>Noms de domaine et DNS</strong>  : On utilise un (sous-)domaine pour chaque service, g√©r√© via un DNS public (par ex. un domaine personnalis√©, ou des sous-domaines d‚Äôun DDNS). Par exemple,  nextcloud.monlab.fr,  wiki.monlab.fr, etc. Le reverse proxy est configur√© pour √©couter sur ces noms et acheminer vers le bon service interne. Cela permet de virtualiser sur une seule IP publique plusieurs services web. Nginx Proxy Manager et Traefik g√®rent tr√®s bien le routage par nom de host, et Traefik peut m√™me d√©finir une r√®gle par wildcard ou par motif d‚ÄôURL si n√©cessaire. Veillez √† configurer des  <strong>entr√©es DNS</strong>  pointant vers votre IP publique (et √† mettre √† jour si IP dynamique, via un service DDNS ou l‚ÄôAPI du registrar).</p>
</li>
<li>
<p><strong>HTTPS obligatoire</strong>  :  <strong>Chiffrer les communications</strong>  est indispensable. Le proxy doit pr√©senter des certificats SSL valides pour vos domaines. Heureusement, NPM comme Traefik automatisent Let‚Äôs Encrypt : il suffit d‚Äôactiver l‚Äôoption (et d‚Äôavoir son domaine correctement point√© DNS). Dans NPM, on coche ‚ÄúRequest a new SSL Certificate‚Äù et ‚ÄúForce SSL‚Äù. Dans Traefik, on configure un resolver ACME (email, m√©thode http-01 ou dns-01) ‚Äì par exemple via la section  certificatesResolvers  du fichier Traefik  . Une fois les certificats en place, on doit  <strong>rediriger tout le trafic HTTP vers HTTPS</strong>  pour √©viter toute fuite en clair. NPM propose le bouton  <strong>Force SSL</strong>  qui fait ajouter une r√®gle de redirection 301 automatique. Avec Traefik, on d√©finit soit un middleware  redirectScheme  global, soit on utilise la directive d‚ÄôentryPoint : par exemple le fichier de config peut contenir:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">entryPoints</span><span class="p">:</span>
<span class="w">  </span><span class="nt">http</span><span class="p">:</span>
<span class="w">    </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;:80&quot;</span>
<span class="w">    </span><span class="nt">http</span><span class="p">:</span>
<span class="w">      </span><span class="nt">redirections</span><span class="p">:</span>
<span class="w">        </span><span class="nt">entryPoint</span><span class="p">:</span>
<span class="w">          </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<span class="w">          </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<span class="w">  </span><span class="nt">https</span><span class="p">:</span>
<span class="w">    </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;:443&quot;</span>
<span class="w">    </span><span class="c1"># ...</span>
</code></pre></div>
<ul>
<li>
<p>qui signifie qu‚Äôon redirige toute connexion HTTP vers l‚Äôentr√©e HTTPS correspondante  . Apr√®s ce r√©glage, toute tentative en  http://  sera automatiquement renvoy√©e en  https://, garantissant que m√™me les utilisateurs ou liens non s√©curis√©s finissent chiffr√©s.</p>
</li>
<li>
<p><strong>Authentification et autorisation</strong>  : Comme discut√© plus haut, il est fortement recommand√© de prot√©ger par un m√©canisme d‚Äôauthentification tout service ouvert sur Internet (√† moins que le service ait d√©j√† sa propre auth robuste). Ainsi, on √©vite qu‚Äôune application vuln√©rable soit accessible publiquement sans contr√¥le. Typiquement, on utilisera Authelia ou au moins une authentification basique pour les applications sensibles. Authelia permet en plus de d√©finir des  <strong>r√®gles d‚Äôautorisation</strong>  fines (par groupe d‚Äôutilisateurs, par adresse IP source, etc.)  , ce qui peut servir √† n‚Äôautoriser que certains utilisateurs √† acc√©der √† une ressource donn√©e.</p>
</li>
<li>
<p><strong>Durcissement et filtres</strong>  : Le proxy peut √©galement servir de  <strong>premi√®re ligne de d√©fense applicative</strong>. On peut activer des  <strong>headers de s√©curit√©</strong>  globaux (HSTS, XSS-Protection, Content-Security-Policy, etc.) sur le proxy. Par exemple, Nginx Proxy Manager permet d‚Äôajouter des custom headers, et Traefik propose un middleware  headers(souvent un preset de ‚ÄúSecure Headers‚Äù) qu‚Äôon peut appliquer sur toutes les routes  . De m√™me, on peut filtrer ou bloquer certains patterns de requ√™tes connus comme malveillants (<em>Block Common Exploits</em>  est une option de NPM qui ajoute quelques r√®gles Nginx de base). Pour aller plus loin, on pourrait int√©grer un WAF (pare-feu applicatif) : Traefik, via un plugin comme  <strong>Traefik Pilot</strong>  (ou en le cha√Ænant avec un conteneur ModSecurity), et Nginx via le module ModSecurity ou en pla√ßant Cloudflare en proxy en amont par exemple. Dans un homelab, une approche populaire est d‚Äôutiliser  <strong>CrowdSec</strong>  coupl√© au reverse proxy : CrowdSec analyse les logs (par ex. les acc√®s Nginx ou Traefik) et bannit automatiquement les IP malveillantes (scans, brute-force) via un bouncer. Traefik poss√®de un middleware CrowdSec natif en plugin, ce qui facilite l‚Äôint√©gration  .</p>
</li>
</ul>
<p>En somme, exposer un service interne via un reverse proxy n√©cessite de  <strong>tout ramener √† un point d‚Äôentr√©e s√©curis√© unique</strong>  (le proxy), d‚Äôy appliquer  <strong>chiffrement et authentification</strong>, et de segmenter ce qui est accessible de ce qui ne l‚Äôest pas. Un homelab de cybers√©curit√© tirera profit de cette configuration pour simuler une architecture proche d‚Äôune DMZ d‚Äôentreprise, o√π l‚Äôon peut pratiquer la gestion des acc√®s externes de mani√®re s√©curis√©e.</p>
<h3 id="separation-des-zones-reseau-segmentation"><strong>S√©paration des zones r√©seau (segmentation)</strong><a class="headerlink" href="#separation-des-zones-reseau-segmentation" title="Permanent link">&para;</a></h3>
<p>Dans un contexte cybers√©curit√©, il est judicieux de  <strong>segmenter le r√©seau du homelab</strong>  en zones de confiance (par exemple : r√©seau  <em>DMZ</em>  pour les services expos√©s, r√©seau  <em>interne</em>  pour les donn√©es sensibles, r√©seau  <em>management</em>  pour l‚Äôadministration, etc.). Le reverse proxy peut jouer un r√¥le central dans cette s√©paration :</p>
<ul>
<li>
<p>On peut placer le serveur qui h√©berge Traefik/Nginx Proxy Manager dans une  <strong>zone DMZ</strong>  (r√©seau isol√© ne contenant que les machines ‚Äúfrontales‚Äù). Ce proxy DMZ a des acc√®s filtr√©s vers la zone interne pour joindre les services, tandis que le trafic entrant depuis Internet est limit√© √† aller vers le proxy uniquement. Ainsi, si un service interne est compromis, l‚Äôattaquant doit encore traverser le proxy pour en sortir. Et si le proxy lui-m√™me est compromis, il est dans une DMZ qui limite les d√©g√¢ts sur le reste du r√©seau.</p>
</li>
<li>
<p>Gr√¢ce au reverse proxy, on peut garder  <strong>ferm√©s tous les ports</strong>  des services internes (ils √©coutent seulement en local ou sur le LAN interne). Par exemple, une appli web sur un serveur interne n‚Äô√©coute que sur son port 8080 en interne ; seul le proxy y acc√®de pour relayer les requ√™tes externes. Cela r√©duit la surface d‚Äôattaque r√©seau. On autorisera dans le firewall interne uniquement l‚ÄôIP du proxy DMZ √† contacter l‚ÄôIP du service sur le port requis.</p>
</li>
<li>
<p>Le proxy peut √©galement faire office de  <strong>passerelle entre VLAN</strong>  : s‚Äôil a des interfaces (ou VLAN) sur plusieurs r√©seaux, il peut accepter des requ√™tes d‚Äôun r√©seau A et aller chercher la ressource sur un r√©seau B. Cependant, il faut √™tre prudent : le proxy ne doit pas devenir une porte d√©rob√©e entre r√©seaux segment√©s. Il convient de n‚Äôautoriser que les flux n√©cessaires (typiquement HTTP/HTTPS du proxy DMZ vers le backend interne sur le port du service web).</p>
</li>
<li>
<p>Authelia, dans une optique Zero Trust, peut renforcer la s√©paration : on peut exiger une authentification forte m√™me pour acc√©der √† certains services depuis la zone  <em>interne</em>. Par exemple, si le homelab a un r√©seau WiFi ‚ÄúIoT‚Äù moins s√ªr, on peut exiger que les utilisateurs de ce r√©seau s‚Äôauthentifient via Authelia pour acc√©der √† l‚Äôinterface d‚Äôadministration d‚Äôun serveur, m√™me si c‚Äôest techniquement en interne.</p>
</li>
</ul>
<p>En termes de configuration, la s√©paration des zones se fait hors du reverse proxy (c‚Äôest une architecture r√©seau), mais le proxy doit √™tre configur√© en cons√©quence : bonnes adresses IP, r√®gles firewall appropri√©es, etc. Traefik ou Nginx peuvent √©couter sur plusieurs interfaces si n√©cessaire, ou on peut d√©ployer deux instances de proxy (un dans la DMZ externe, un interne) cascade si on veut complexifier l‚Äôarchitecture. Pour un homelab n√©anmoins, une instance dans la zone expos√©e suffit g√©n√©ralement, parlant aux services en interne.</p>
<h3 id="filtrage-et-supervision-des-requetes"><strong>Filtrage et supervision des requ√™tes</strong><a class="headerlink" href="#filtrage-et-supervision-des-requetes" title="Permanent link">&para;</a></h3>
<p>Un homelab de cybers√©curit√© sert souvent √† exp√©rimenter avec des outils de d√©tection et de protection. Le reverse proxy est un endroit strat√©gique pour impl√©menter du  <strong>filtrage de requ√™tes</strong>  et de la  <strong>supervision</strong>  :</p>
<ul>
<li>
<p><strong>Journaux d‚Äôacc√®s centralis√©s</strong>  : Le proxy enregistre toutes les requ√™tes entrantes (domaines, URL, IP source, r√©ponse‚Ä¶). Ceci offre une visibilit√© globale sur qui acc√®de √† quoi. On peut connecter ces logs √† des outils SIEM ou de monitoring (par ex. Grafana/Loki pour Traefik, ou un ELK/Graylog) afin de d√©tecter des anomalies. Traefik fournit un log d‚Äôacc√®s d√©taill√© (format JSON possible) configurable dans traefik.yml  . Nginx Proxy Manager logge via Nginx (format combin√© classique) et on peut ajuster la verbosit√©.  <strong>Analyser ces logs</strong>  permet de rep√©rer des scans, des tentatives d‚Äôexploitation (URL √©tranges), etc.</p>
</li>
<li>
<p><strong>Blocage automatique d‚ÄôIP malveillantes</strong>  : Coupl√© aux logs, on peut int√©grer des solutions comme  <strong>Fail2Ban</strong>  ou  <strong>CrowdSec</strong>. Fail2Ban peut surveiller les logs Nginx pour des motifs (codes 401 r√©p√©titifs, 404 suspectes) et ins√©rer des r√®gles firewall pour bannir l‚ÄôIP temporairement. CrowdSec, plus √©volu√©, utilise des  <em>scenarios</em>  pour d√©tecter comportements malveillants (brute-force, scan, etc.) et peut agir au niveau du proxy (bouncer Traefik) ou du firewall syst√®me. Traefik, gr√¢ce √† son plugin CrowdSec ou fail2ban, facilite cette automatisation  . Pour NPM, on peut d√©ployer CrowdSec sur la machine et le configurer pour parser les logs Nginx.</p>
</li>
<li>
<p><strong>Web Application Firewall (WAF)</strong>  : L‚Äôajout d‚Äôun WAF permet de filtrer des requ√™tes en fonction de leur contenu (payload) pour bloquer des attaques web connues (injections SQL, XSS, etc.). Nginx peut int√©grer ModSecurity v3 en tant que module (certaines images Docker custom de NPM existent incluant ModSec). Traefik, lui, n‚Äôint√®gre pas nativement de WAF complet, mais on peut mettre Traefik derri√®re un conteneur SWAG/NGINX+ModSecurity, ou utiliser le plugin  <em>OHWF</em>  (Open Hybrid WAF) exp√©rimental. Une alternative courante en homelab est d‚Äôutiliser Cloudflare en proxy inverse en amont du homelab : Cloudflare fournit un WAF g√©r√© qui stoppe d√©j√† beaucoup d‚Äôattaques avant m√™me qu‚Äôelles n‚Äôatteignent votre reverse proxy. Cependant, cela signifie confier le trafic √† un tiers, ce qui sort un peu du cadre purement auto-h√©berg√©.</p>
</li>
<li>
<p><strong>Headers et CSP</strong>  : Outre bloquer ce qui est mauvais, on peut ajouter ce qui est bon. Par exemple, ajouter des  <strong>headers de s√©curit√©</strong>  comme HSTS (Strict-Transport-Security), X-Content-Type-Options, X-Frame-Options, Content-Security-Policy, etc., pour r√©duire la surface aux attaques client. Traefik a un middleware  secureHeaders(configurable via fichier dynamique) qui fournit un ensemble de ces headers recommand√©s  . Nginx permet de les ajouter via  add_header. Dans un homelab, c‚Äôest un bon exercice de configurer ces en-t√™tes correctement pour apprendre le hardening web.</p>
</li>
</ul>
<p>En combinant ces mesures de filtrage et de supervision, le homelab peut simuler un environnement  <strong>sous surveillance</strong>, comme en entreprise, o√π chaque requ√™te est logg√©e, analys√©e, et potentiellement bloqu√©e si suspecte. Cela permet de tester des sc√©narios d‚Äôattaque en conditions r√©alistes et de valider l‚Äôefficacit√© des contre-mesures (par exemple, lancer un scan depuis l‚Äôext√©rieur et voir CrowdSec bannir l‚ÄôIP dans Traefik, etc.).</p>
<h2 id="fonctionnalites-de-securite-avancees-ldap-oauth2-sso-2fa"><strong>Fonctionnalit√©s de s√©curit√© avanc√©es (LDAP, OAuth2, SSO, 2FA)</strong><a class="headerlink" href="#fonctionnalites-de-securite-avancees-ldap-oauth2-sso-2fa" title="Permanent link">&para;</a></h2>
<p>Au-del√† des configurations de base, un homelab de s√©curit√© peut tirer profit de fonctionnalit√©s avanc√©es offertes par nos outils :</p>
<h3 id="integration-ldapoauth2-pour-lauthentification-centralisee"><strong>Int√©gration LDAP/OAuth2 pour l‚Äôauthentification centralis√©e</strong><a class="headerlink" href="#integration-ldapoauth2-pour-lauthentification-centralisee" title="Permanent link">&para;</a></h3>
<p>Dans un contexte professionnel, l‚Äôauthentification des utilisateurs se fait souvent via un  <strong>annuaire central</strong>  (LDAP/Active Directory) ou un  <strong>f√©d√©ration d‚Äôidentit√©</strong>  (SSO OAuth2/OIDC, SAML‚Ä¶). Il est int√©ressant de reproduire cela en homelab. Ni Nginx Proxy Manager ni Traefik n‚Äôint√®grent √† eux seuls un serveur LDAP ou OAuth2, mais  <strong>Authelia</strong>  peut servir d‚Äôinterface :</p>
<ul>
<li>
<p><strong>Authelia + LDAP</strong>  : Authelia peut √™tre configur√© pour utiliser un  <strong>backend LDAP/AD</strong>  comme source des utilisateurs et groupes. Par exemple, on peut d√©ployer une petite instance OpenLDAP ou FreeIPA dans le homelab, y g√©rer quelques comptes, et configurer Authelia en  <em>authentication_backend: ldap</em>  (plut√¥t que  <em>file</em>). Ainsi, lorsqu‚Äôun utilisateur se connecte via Authelia, ses identifiants sont v√©rifi√©s aupr√®s de l‚Äôannuaire LDAP. Cela permet de centraliser l‚Äôauthentification de tout le homelab sur un r√©f√©rentiel unique (comme ce serait le cas avec un Active Directory en entreprise). Authelia supporte les op√©rations LDAP usuelles et m√™me la r√©initialisation de mot de passe LDAP via un lien mail  . De plus, en se basant sur les  <em>groups</em>  LDAP, on peut d√©finir des politiques d‚Äôacc√®s dans Authelia (par exemple, seul le groupe ‚Äúadmins‚Äù a acc√®s √† l‚Äôinterface de gestion proxmox). Cette int√©gration est un excellent exercice pour un homelab car elle touche aux notions d‚Äôannuaire, de sch√©ma utilisateur et de synchronisation.</p>
</li>
<li>
<p><strong>SSO OAuth2/OIDC</strong>  : Authelia se positionne comme un  <strong>fournisseur OpenID Connect 1.0 certifi√©</strong>  . Cela signifie qu‚Äôil parle le protocole moderne d‚Äôauthentification (OIDC est une surcouche d‚ÄôOAuth2) utilis√© par de nombreuses applications web. On peut donc, d‚Äôune part, int√©grer des applications tierces qui supportent l‚ÄôOIDC pour d√©l√©guer leur login √† Authelia. D‚Äôautre part, Authelia peut lui-m√™me consommer des identit√©s d‚Äôun fournisseur externe OAuth2 ? ‚Äì Ce cas d‚Äôusage est moins courant car Authelia est plut√¥t fait pour √™tre  <strong>le</strong>  fournisseur. Si l‚Äôon souhaitait ‚ÄúLogin with Google‚Äù par exemple sur nos services, on utiliserait plut√¥t un outil comme  <strong>OAuth2 Proxy</strong>  ou  <strong>Authentik</strong>  qui ferait office d‚Äôinterm√©diaire avec Google. Nginx et Traefik peuvent s‚Äôint√©grer avec OAuth2 Proxy de fa√ßon semblable √† Authelia (via  auth_request  ou forwardAuth).  <strong>Authentik</strong>  et  <strong>Keycloak</strong>  sont deux alternatives populaires √† Authelia pour le SSO avanc√© : Authentik est open-source (Django) et offre plus de connecteurs (par ex. login Google, SAML, etc.), Keycloak est une solution robuste utilis√©e en entreprise. Cependant, leur mise en ≈ìuvre est plus lourde. Dans un homelab cyber, mettre en place Authentik ou Keycloak pour comparer avec Authelia peut √™tre instructif, mais Authelia a l‚Äôavantage de la l√©g√®ret√© et de la simplicit√© pour d√©buter le SSO.</p>
</li>
<li>
<p><strong>OAuth2 access control</strong>  : Traefik Enterprise (version payante) int√®gre nativement l‚ÄôOIDC/OAuth2 et le SSO d‚Äôentreprise (avec support JWT, etc.), mais avec Traefik open-source on s‚Äôappuie sur les solutions externes cit√©es. Nginx (open-source) peut utiliser des modules Lua ou des modules tiers pour valider des JWT ou interroger un IdP OAuth2, mais cela sort du scope standard de NPM.</p>
</li>
</ul>
<p>En r√©sum√©, l‚Äôint√©gration LDAP/OAuth2 dans le homelab se fait via un composant d√©di√© (Authelia, Keycloak, etc.) coupl√© au reverse proxy. Cela permet de reproduire une  <strong>authentification centralis√©e</strong>  comme on en trouve en milieu professionnel, et d‚Äôexp√©rimenter avec des protocoles standards (LDAP, OAuth2/OIDC). Pour un ing√©nieur s√©cu, c‚Äôest l‚Äôoccasion de se familiariser avec la gestion des identit√©s, la d√©l√©gation d‚Äôauthentification, et de comprendre les d√©fis de l‚Äôint√©gration SSO.</p>
<h3 id="protection-contre-les-attaques-par-force-brute"><strong>Protection contre les attaques par force brute</strong><a class="headerlink" href="#protection-contre-les-attaques-par-force-brute" title="Permanent link">&para;</a></h3>
<p>Les attaques par  <strong>brute-force</strong>  (essais r√©p√©t√©s de mots de passe) sont une menace classique d√®s qu‚Äôun service est accessible sur Internet. Dans un homelab expos√©, on veillera √† mettre en place des m√©canismes de protection :</p>
<ul>
<li>
<p><strong>Authelia ‚Äì Regulation</strong>  : Authelia int√®gre nativement un module de limitation des tentatives de login. On peut configurer des param√®tres comme  max_retries  (nombre de tentatives avant blocage),  find_time  (intervalle de temps de comptabilisation) et  ban_time  (dur√©e du bannissement)  . Par exemple, on pourrait autoriser 5 essais en 2 minutes avant de bloquer l‚Äôutilisateur pendant 10 minutes. Ce m√©canisme de  <strong>Login Regulation</strong>  emp√™che un attaquant d‚Äôessayer une infinit√© de mots de passe sur un compte  . Le bannissement est g√©n√©ralement appliqu√© par identifiant (et potentiellement par IP). Authelia journalise ces √©v√©nements, ce qui permet de d√©tecter une attaque en cours.</p>
</li>
<li>
<p><strong>Fail2Ban</strong>  : Pour les services non prot√©g√©s par Authelia (ou m√™me en compl√©ment), Fail2Ban reste un alli√© pr√©cieux. En homelab, on peut configurer Fail2Ban pour surveiller les logs Nginx Proxy Manager. Par exemple, rep√©rer 401 Unauthorized r√©p√©t√©s sur une URL d‚Äôauth -&gt; ban de l‚ÄôIP au niveau iptables. Sur Traefik, on peut envisager de le faire aussi via les logs d‚Äôacc√®s (moins trivial car Traefik n‚Äôa pas de log ‚Äúerreur 401‚Äù distinct, mais c‚Äôest faisable). L‚Äôavantage de Fail2Ban est sa simplicit√© et son efficacit√© pour bannir au niveau r√©seau, emp√™chant l‚Äôattaquant d‚Äôenvoyer la suite des requ√™tes.</p>
</li>
<li>
<p><strong>Traefik plugins</strong>  : Comme mentionn√© pr√©c√©demment, Traefik dispose d‚Äôun plugin  <strong>Fail2Ban</strong>  officiel qui reproduit ce comportement directement dans le proxy. Il peut suivre les 401 sur un middleware d‚Äôauthentification par exemple et couper l‚Äôacc√®s. Aussi, l‚Äôutilisation de  <strong>CrowdSec</strong>  apporte une dimension communautaire : si une IP est connue pour attaquer d‚Äôautres membres de la communaut√©, elle peut √™tre pr√©-bannie (syst√®me de blocklist collaborative). On peut configurer le bouncer CrowdSec pour qu‚Äôil renvoie directement une page de blocage depuis le proxy si l‚ÄôIP est bannie, avant m√™me d‚Äôarriver aux services.</p>
</li>
<li>
<p><strong>Complexit√© des mots de passe &amp; 2FA</strong>  : La meilleure d√©fense anti brute-force reste d‚Äôexiger des  <strong>mots de passe forts</strong>  et id√©alement un  <strong>second facteur</strong>. Authelia impose par exemple une politique de mot de passe (param√©trable via l‚Äôoption zxcvbn pour exiger une certaine robustesse du mot de passe)  . Et bien s√ªr, avec le 2FA activ√©, un mot de passe compromis ne suffit plus, ce qui d√©courage fortement le brute-force. Dans un homelab, on peut tester diff√©rentes m√©thodes de second facteur : TOTP (Google Authenticator, etc.),  <strong>WebAuthn</strong>  (cl√© U2F type YubiKey), ou  <strong>Duo push</strong>  . Authelia supporte ces m√©thodes multiples ‚Äì par exemple WebAuthn permet d‚Äôapprendre √† int√©grer l‚Äôauthentification par cl√© physique ou empreinte digitale, ce qui est tr√®s int√©ressant en cybers√©curit√© moderne.</p>
</li>
</ul>
<p>En conclusion sur la brute-force, combiner un  <strong>verrou logiciel</strong>  (Authelia ou Fail2Ban qui bloque apr√®s X essais) avec une  <strong>authentification forte</strong>  (mots de passe solides + second facteur) offre une d√©fense efficace. Un homelab bien configur√© doit ainsi r√©sister aux bots qui tentent des attaques automatis√©es sur les pages de login. N‚Äôoublions pas la surveillance : il est formateur de constater dans les logs ces tentatives et de v√©rifier que les contre-mesures r√©agissent (ex: voir l‚ÄôIP passer en bannie apr√®s trop d‚Äô√©checs).</p>
<h3 id="authentification-unifiee-et-multi-facteurs-sso-mfa"><strong>Authentification unifi√©e et multi-facteurs (SSO &amp; MFA)</strong><a class="headerlink" href="#authentification-unifiee-et-multi-facteurs-sso-mfa" title="Permanent link">&para;</a></h3>
<p>Nous avons d√©j√† √©voqu√© plusieurs fois le SSO et le MFA, que propose notamment Authelia. Regroupons ici ces notions pour bien comprendre leur apport dans le homelab :</p>
<ul>
<li>
<p><strong>Single Sign-On (SSO)</strong>  : Le SSO vise √† permettre √† un utilisateur de s‚Äôauthentifier  <strong>une seule fois</strong>  pour acc√©der √† plusieurs applications diff√©rentes, sans avoir √† re-saisir ses identifiants pour chaque service. Dans notre stack, Authelia r√©alise cela en √©mettant un  <strong>cookie de session</strong>  apr√®s login, valable pour l‚Äôensemble des sous-domaines prot√©g√©s (on d√©finit un domaine racine commun, par ex.  *.monlab.fr)  . Ainsi, l‚Äôutilisateur qui se connecte sur  service1.monlab.fr  via Authelia obtient un cookie de session (sur  .monlab.fr), et lorsqu‚Äôil ira sur  service2.monlab.fr, le reverse proxy pr√©sentera ce cookie √† Authelia qui verra que la session est valide et laissera passer automatiquement  . L‚Äôexp√©rience est transparente : une seule page de login, puis navigation fluide entre services. C‚Äôest tr√®s confortable pour l‚Äôutilisateur et plus s√©curis√© (on √©vite d‚Äôavoir des mots de passe multiples circulant). Pour le mettre en ≈ìuvre en homelab, on s‚Äôassure que  session.domain  est bien r√©gl√© dans Authelia (par ex.  monlab.fr) et on prot√®ge tous les services via Authelia. On peut tester le SSO en ouvrant diff√©rents navigateurs ou en invalidant le cookie pour voir comment la session se propage.</p>
</li>
<li>
<p><strong>Multi-Factor Authentication (MFA)</strong>  : C‚Äôest un pilier de la s√©curit√© moderne. Authelia permet d‚Äôactiver le  <strong>2FA</strong>  (ou m√™me 3FA) pour les domaines qu‚Äôon veut. Dans la config  <em>access_control</em>, on peut d√©finir  policy: two_factor  pour certaines ressources sensibles  . Au login, apr√®s le mot de passe, Authelia va alors demander le code TOTP (ou une validation via l‚Äôappli Duo, ou une authentification WebAuthn/Passkey) avant de valider la session. L‚Äôint√©gration de MFA dans un homelab est un excellent moyen de se familiariser avec ces technologies. Par exemple, on peut enregistrer une cl√© U2F sur Authelia et ainsi utiliser une cl√© physique pour se logguer ‚Äì ce qui ajoute une couche ‚Äúquelque chose que l‚Äôon poss√®de‚Äù en plus du mot de passe. Authelia supporte √©galement les  <strong>Passkeys</strong>  (technologie plus r√©cente visant √† remplacer les mots de passe)  , ce qui permet d‚Äôexp√©rimenter les futures tendances de l‚Äôauthentification passwordless.</p>
</li>
<li>
<p><strong>Granularit√© et exceptions</strong>  : On peut vouloir SSO + MFA pour la plupart des services, mais peut-√™tre pas pour tous. Authelia offre une granularit√© par r√®gle : on peut mettre certaines applications en  one_factor  (juste mot de passe) et d‚Äôautres en  two_factor  . On peut m√™me combiner avec des conditions r√©seau ‚Äì par exemple, exiger 2FA seulement quand on est en dehors du LAN, mais en one_factor sur le LAN (via la directive  networks  dans les r√®gles). Cela permet de reproduire une politique de confiance conditionnelle (un peu comme du MFA contextuel en entreprise). C‚Äôest √† l‚Äôappr√©ciation de chacun en homelab ; du point de vue s√©curit√© pure, il est recommand√© d‚Äôactiver le MFA pour les acc√®s externes au minimum.</p>
</li>
</ul>
<p>En mettant en place le SSO et MFA dans le homelab, on se rapproche des standards d‚Äôinfrastructure s√©curis√©e d‚Äôune entreprise. C‚Äôest tr√®s formateur pour un ing√©nieur s√©curit√© de comprendre les m√©canismes sous-jacents : cookies de session, jetons JWT √©ventuellement (Authelia peut √©mettre des JWT OIDC), protocole WebAuthn, algorithme TOTP, etc. De plus, cela am√©liore nettement la  <strong>s√©curit√©</strong>  de votre homelab r√©el, ce qui n‚Äôest pas n√©gligeable si vous exposez des services personnels.</p>
<h2 id="conclusion"><strong>Conclusion</strong><a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>Mettre en ≈ìuvre un reverse proxy dans un homelab est quasiment un passage oblig√© pour qui veut exposer des services de mani√®re ma√Ætris√©e.  <strong>Nginx Proxy Manager</strong>  et  <strong>Traefik</strong>  sont deux excellentes options qui r√©pondent √† des profils diff√©rents : NPM offre la simplicit√© d‚Äôune interface graphique et la robustesse de Nginx ‚Äì id√©ale pour d√©buter ou pour un lab √† configuration ponctuelle ‚Äì, tandis que Traefik apporte l‚Äôautomatisation et la souplesse pour un lab tr√®s containeris√© ou √©volutif, avec des fonctionnalit√©s avanc√©es int√©gr√©es (d√©couverte, middlewares). Dans un contexte de cybers√©curit√©, Traefik se montre tr√®s adapt√© gr√¢ce √† ses plugins de s√©curit√© et son int√©gration document√©e avec des outils comme Authelia  , mais NPM peut tout √† fait √™tre utilis√© de mani√®re s√©curis√©e √©galement (en y ajoutant manuellement les m√™mes composants).</p>
<p>L‚Äôoutil  <strong>Authelia</strong>, en particulier, s‚Äôav√®re un compl√©ment pr√©cieux pour un homelab s√©curis√©. En d√©ployant Authelia aux c√¥t√©s du reverse proxy, on dote son lab d‚Äôun v√©ritable  <strong>syst√®me d‚Äôauthentification unifi√©e √† double facteur</strong>, comparable √† ce qu‚Äôon trouve en production dans les entreprises, le tout avec des solutions open-source. Ceci transforme le homelab en terrain d‚Äôentra√Ænement pour impl√©menter et tester des politiques de s√©curit√© (SSO, MFA, restrictions granulaires) sur ses propres services auto-h√©berg√©s.</p>
<p>En fin de compte, le choix pr√©cis de la stack (Nginx vs Traefik, avec ou sans Authelia) d√©pendra de vos objectifs d‚Äôapprentissage et de vos contraintes. Un  <strong>ing√©nieur en cybers√©curit√©</strong>  apprendra beaucoup en exp√©rimentant les deux approches : commencer par Nginx Proxy Manager pour appr√©hender les concepts de base (reverse proxy, certificats, DNS, redirections), puis monter en puissance avec Traefik pour l‚Äôaspect ‚ÄúInfra as Code‚Äù et int√©gration continue, tout en ajoutant Authelia pour la couche IAM (Identity and Access Management). Le homelab ainsi constitu√© permettra de simuler bon nombre de sc√©narios de s√©curit√© (attaques web, tests d‚Äôintrusion depuis l‚Äôext√©rieur, mise en place de d√©fenses actives) dans un environnement contr√¥l√© et modulable.</p>
<p>En somme, Nginx Proxy Manager, Traefik et Authelia forment un trio compl√©mentaire pour construire un homelab √† la fois  <strong>fonctionnel</strong>  (multi-services expos√©s proprement) et  <strong>s√©curis√©</strong>  (contr√¥le fin des acc√®s, surveillance, r√©silience). √Ä vous de jouer pour les configurer selon vos besoins, et n‚Äôoubliez pas : la documentation officielle et la communaut√© sont d‚Äôune grande aide pour approfondir chaque composant et r√©soudre les √©ventuels √©cueils techniques rencontr√©s en chemin.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.expand", "toc.integrate", "content.code.annotate", "search.highlight", "search.suggest"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>