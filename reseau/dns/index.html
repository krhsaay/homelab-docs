
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation pour construire un homelab s√©curis√© et complet">
      
      
        <meta name="author" content="krhsaay">
      
      
      
        <link rel="prev" href="../dashboard/">
      
      
        <link rel="next" href="../vpn-remote-access/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>DNS (Pi-hole, AdGuard...) - Cyber Doc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pi-hole-adguard-home-et-technitium-dns-comparatif-et-configurations-en-homelab" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-t√™te">
    <a href="../.." title="Cyber Doc" class="md-header__button md-logo" aria-label="Cyber Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cyber Doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DNS (Pi-hole, AdGuard...)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cyber Doc" class="md-nav__button md-logo" aria-label="Cyber Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Cyber Doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accueil
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üèó Infrastructure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            üèó Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/proxmox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxmox VE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/stockage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stockage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/reseau/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    R√©seau & VLANs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/lxc-vs-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LXC vs VM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üåê R√©seau
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            üåê R√©seau
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashboards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    DNS (Pi-hole, AdGuard...)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    DNS (Pi-hole, AdGuard...)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des mati√®res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des mati√®res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#comparatif-technique-detaille" class="md-nav__link">
    <span class="md-ellipsis">
      Comparatif technique d√©taill√©
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exemples-de-configurations-types" class="md-nav__link">
    <span class="md-ellipsis">
      Exemples de configurations types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exemples de configurations types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-dns-primairesecondaire-pour-resilience" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration ‚ÄúDNS primaire/secondaire‚Äù pour r√©silience
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-avec-chiffrement-dohdot-en-amont-et-en-interne" class="md-nav__link">
    <span class="md-ellipsis">
      DNS avec chiffrement (DoH/DoT) en amont et en interne
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-proxy-dns-vs-mode-resolveur-local" class="md-nav__link">
    <span class="md-ellipsis">
      Mode ¬´ proxy DNS ¬ª vs mode r√©solveur local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serveur-dns-par-vlan-segmentation-du-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Serveur DNS par VLAN / segmentation du DNS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenarios-specifiques-dusage-en-homelab" class="md-nav__link">
    <span class="md-ellipsis">
      Sc√©narios sp√©cifiques d‚Äôusage en homelab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sc√©narios sp√©cifiques d‚Äôusage en homelab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blocage-des-publicites-et-du-tracking-internet" class="md-nav__link">
    <span class="md-ellipsis">
      Blocage des publicit√©s et du tracking internet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolation-reseau-par-le-dns-iot-et-environnements-sensibles" class="md-nav__link">
    <span class="md-ellipsis">
      Isolation r√©seau par le DNS (IoT et environnements sensibles)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-split-pour-lab-interne-dns-interne-vs-externe" class="md-nav__link">
    <span class="md-ellipsis">
      DNS ¬´ split ¬ª pour lab interne (DNS interne vs externe)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securite-mises-a-jour-et-resilience-du-service-dns" class="md-nav__link">
    <span class="md-ellipsis">
      S√©curit√©, mises √† jour et r√©silience du service DNS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="S√©curit√©, mises √† jour et r√©silience du service DNS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#securite-de-linstance-dns" class="md-nav__link">
    <span class="md-ellipsis">
      S√©curit√© de l‚Äôinstance DNS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#journalisation-et-respect-de-la-vie-privee" class="md-nav__link">
    <span class="md-ellipsis">
      Journalisation et respect de la vie priv√©e
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resilience-du-service-dns-et-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      R√©silience du service DNS et optimisation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vpn-remote-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acc√®s VPN distant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reverse-proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reverse Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ddns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS Dynamique (DDNS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../torrent-vpn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VPN et torrents
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üß∞ Outils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            üß∞ Outils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/gestion-fichiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestion de fichiers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/gestion-mots-de-passe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mots de passe (Vaultwarden...)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/favoris/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Favoris et veille (Hoarder)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../outils/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker & Portainer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üì∫ M√©dia
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            üì∫ M√©dia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streaming (Jellyfin, Plex)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/overseerr-sonarr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sonarr, Overseerr
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/clients-download.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    T√©l√©chargements (qBittorrent)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/photos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Photos (Immich)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üè† Domotique
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            üè† Domotique
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domotique/homeassistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home Assistant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domotique/zigbee/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee2MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domotique/surveillance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vid√©osurveillance (Frigate)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üìä Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            üìä Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grafana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/prometheus-influx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus / InfluxDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monitoring/netalert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NetAlertX
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üîê S√©curit√©
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            üîê S√©curit√©
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/vaultwarden/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vaultwarden
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/authentification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentification MFA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/siem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SIEM (Wazuh, ELK...)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../securite/segmentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Segmentation & honeypots
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    üß™ DIY
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            üß™ DIY
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diy/esp32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ESP32 & capteurs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diy/octoprint.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OctoPrint & impression 3D
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diy/n8n.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    N8N Automatisation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="pi-hole-adguard-home-et-technitium-dns-comparatif-et-configurations-en-homelab"><strong>Pi-hole, AdGuard Home et Technitium DNS : comparatif et configurations en homelab</strong><a class="headerlink" href="#pi-hole-adguard-home-et-technitium-dns-comparatif-et-configurations-en-homelab" title="Permanent link">&para;</a></h1>
<h2 id="comparatif-technique-detaille"><strong>Comparatif technique d√©taill√©</strong><a class="headerlink" href="#comparatif-technique-detaille" title="Permanent link">&para;</a></h2>
<p><strong>Pr√©sentation g√©n√©rale :</strong>  Pi-hole, AdGuard Home et Technitium DNS Server sont trois solutions populaires de DNS filtrant pour bloquer les publicit√©s et prot√©ger un r√©seau domestique. Toutes trois fonctionnent comme des serveurs DNS locaux capables de  <strong>bloquer les domaines ind√©sirables</strong>  (publicit√©, trackers, malwares, sites adultes) √† l‚Äôaide de listes noires. Elles disposent √©galement de fonctionnalit√©s communes telles que la journalisation des requ√™tes DNS et une interface d‚Äôadministration web  . Cependant, elles diff√®rent sur leur  <strong>architecture technique et fonctionnalit√©s avanc√©es</strong>. Le tableau ci-dessous r√©sume certaines capacit√©s :</p>
<ul>
<li>
<p><strong>Blocage de domaines ind√©sirables :</strong>  <strong>Pi-hole</strong>,  <strong>AdGuard Home</strong>  et  <strong>Technitium DNS</strong>  assurent tous un DNS sinkhole efficace. Ils peuvent charger des listes de domaines √† bloquer (ads, malwares, etc.), appliquer le Safe Search et utiliser des listes personnalis√©es  . Le blocage par expressions r√©guli√®res est aussi support√© par Pi-hole et AdGuard.  <strong>En pratique, l‚Äôefficacit√© de filtrage par d√©faut est similaire</strong>  ‚Äì tous deux utilisent des listes de blocage comparables et bloquent un nombre proche de publicit√©s d√®s l‚Äôinstallation, m√™me s‚Äôil est conseill√© d‚Äôajouter d‚Äôautres listes pour am√©liorer la couverture  . Technitium int√®gre √©galement ces fonctionnalit√©s de base de blocage DNS.</p>
</li>
<li>
<p><strong>Performance et ressources :</strong>  Les diff√©rences de performance entre Pi-hole et AdGuard Home sont  <strong>minimes</strong>. Des tests montrent que les temps de r√©ponse DNS sont √©quivalents (18ms pour Pi-hole vs 21ms pour AdGuard dans un exemple, √©cart n√©gligeable)  . C√¥t√© empreinte syst√®me, AdGuard Home est √©crit en Go tandis que Pi-hole s‚Äôappuie sur dnsmasq et une interface PHP, ce qui fait souvent dire que Pi-hole consomme un peu plus de RAM. En r√©alit√©, avec une configuration de base, Pi-hole utilise environ  <strong>30‚ÄØMo de RAM de plus</strong>  qu‚ÄôAdGuard Home, diff√©rence imperceptible sur du mat√©riel moderne  .  <strong>Avec de tr√®s grandes listes de blocage</strong>, Pi-hole a √©t√© mesur√© autour de ~100‚ÄØMo de RAM contre ~250‚ÄØMo pour AdGuard dans un test sur Portainer  ‚Äì mais d‚Äôautres retours signalent l‚Äôinverse ou un √©cart moindre, selon l‚Äôenvironnement.  <strong>Globalement, les trois solutions restent l√©g√®res</strong>  et tournent sans probl√®me sur un Raspberry Pi ou un petit NAS  . Le  <strong>CPU</strong>  n‚Äôest g√©n√©ralement pas un facteur limitant (quelques % d‚Äôutilisation au plus). Les trois chargent les listes de blocage en m√©moire pour une r√©solution rapide, il faut donc pr√©voir suffisamment de RAM si vous importez des listes massives  .</p>
</li>
<li>
<ul>
<li><strong>M√©canisme DNS :</strong>  Pi-hole et AdGuard Home agissent principalement comme  <strong>serveurs DNS cache/forward</strong>  : ils re√ßoivent les requ√™tes des clients, bloquent celles correspondant aux domaines filtr√©s, et transf√®rent les autres √† un serveur DNS amont (par exemple Cloudflare, Quad9, ou un r√©solveur local). Pi-hole n‚Äôembarque pas de r√©solveur r√©cursif complet par d√©faut, mais il est courant de l‚Äôassocier √†  <em>Unbound</em>  pour r√©soudre directement depuis la racine. AdGuard Home, lui, peut √©galement fonctionner en mode r√©cursif (il dispose d‚Äôune option pour activer un r√©solveur DNS complet en interne) ou en mode  <strong>forwarder</strong>  vers des serveurs chiffr√©s (DoH/DoT) gr√¢ce √† sa prise en charge native de DNS-over-HTTPS, DNS-over-TLS et m√™me DNS-over-QUIC  .  <strong>Technitium DNS</strong>  se distingue ici car c‚Äôest un  <strong>serveur DNS complet (r√©cursif et faisant autorit√©)</strong>  : il int√®gre nativement la r√©solution r√©cursive  <em>et</em>  peut h√©berger des zones DNS locales autoritaires  . En clair, Technitium offre d‚Äôembl√©e ce que Pi-hole/AdGuard font plus un r√©solveur interne (plus besoin d‚Äôinstaller Unbound) et un serveur faisant autorit√© sur vos domaines locaux. Il supporte aussi directement DoH/DoT en sortie  <strong>et en entr√©e</strong>, ce qui permet de servir vos clients via DNS chiffr√© si souhait√© (AdGuard Home peut aussi servir en DoH/DoQ en configurant les fonctionnalit√©s avanc√©es).</li>
</ul>
</li>
<li>
<p><strong>Interface et gestion :</strong>  <strong>Pi-hole</strong>  offre une interface web simple et √©pur√©e pour configurer les listes noires/blanches, voir les journaux de requ√™tes et quelques r√©glages r√©seau de base. Son interface, bien que moins ¬´ moderne ¬ª, reste fonctionnelle et soutenue par une  <strong>forte communaut√©</strong>  (nombreux tutoriels, support, etc.)  .  <strong>AdGuard Home</strong>  dispose d‚Äôune interface plus moderne et conviviale, avec des tableaux de bord color√©s et des menus bien organis√©s. La configuration initiale est facilit√©e (tout en un seul binaire), et de nombreuses options (DNS chiffr√©, contr√¥le parental, filtres personnalis√©s) sont activables en quelques clics  . En revanche, certains r√©glages avanc√©s de DNS local sur AdGuard sont un peu cach√©s (il faut ajouter des enregistrements DNS locaux via les  _‚ÄúCustom Rules‚Äù_manuellement)  , alors que Pi-hole propose une section d√©di√©e ‚ÄúDNS Local‚Äù plus intuitive pour ajouter des noms locaux  .  <strong>Technitium DNS</strong>, malgr√© son ampleur fonctionnelle, fournit √©galement une interface web compl√®te. Les retours d‚Äôexp√©rience notent qu‚Äôelle est  <strong>tr√®s riche en options tout en restant user-friendly</strong>, similaire √† Pi-hole/AdGuard voire plus intuitive sur certains points  . On peut tout configurer depuis le GUI ou via une API HTTP, sans devoir √©diter manuellement des fichiers de configuration  . L‚Äôinterface de Technitium permet par exemple de cr√©er des zones DNS, des r√®gles de transfert conditionnel, de multiples port√©es DHCP, etc., directement via le web.</p>
</li>
<li>
<p><strong>Int√©gration r√©seau et fonctionnalit√©s :</strong>  Les trois solutions peuvent fonctionner sur la plupart des plateformes (Linux, Docker, Raspberry Pi, etc.)  .  <strong>Chacune peut servir de serveur DHCP</strong>  pour votre LAN, rempla√ßant le DHCP de votre box/routeur si n√©cessaire  . Pi-hole et AdGuard Home g√®rent un seul domaine DHCP/local √† la fois, tandis que  <strong>Technitium DNS peut d√©finir plusieurs plages DHCP</strong>  pour couvrir plusieurs VLAN/r√©seaux isol√©s depuis une seule instance  . C‚Äôest un atout dans un homelab segment√© en multiples sous-r√©seaux : Technitium permet de  <strong>servir plusieurs VLAN</strong>  en DHCP/DNS distincts via une configuration centralis√©e. C√¥t√© DNS local, Pi-hole et AdGuard autorisent l‚Äôajout de quelques enregistrements locaux ou la redirection conditionnelle (ex. transf√©rer les requ√™tes d‚Äôun suffixe local vers un autre DNS) ‚Äì fonctionnalit√© dite  <em>conditional forwarding</em>  pour r√©soudre les noms de votre LAN via le DNS de votre routeur.  <strong>Technitium</strong>  pousse plus loin en permettant de  <strong>cr√©er des zones locales compl√®tes</strong>  (par exemple une zone ‚Äúlab.home.arpa‚Äù avec tous vos enregistrements) et d‚Äôactiver des  <em>serveurs secondaires</em>  pour ces zones (transfert de zone possible)  . Il supporte aussi la notion de  <em>Conditional Forwarder</em>  plus avanc√©e : pour un domaine donn√©, vous pouvez sp√©cifier un serveur DNS diff√©rent, tout en pouvant  <strong>surcharger certains enregistrements</strong>  de ce domaine localement  . Enfin, en termes d‚Äôint√©gration, Pi-hole et AdGuard sont souvent utilis√©s en  <strong>compl√©ment du routeur/pare-feu</strong>  : il faut configurer votre DHCP (sur la box ou OPNsense par exemple) pour distribuer l‚Äôadresse IP du Pi-hole/AdGuard comme DNS aux clients du r√©seau. Technitium pourrait tout √† fait √™tre utilis√© de la m√™me mani√®re, ou m√™me install√© directement sur la machine faisant routeur si on le souhaite (il remplace alors avantageusement le DNS de base du routeur). Notons qu‚ÄôAdGuard Home existe aussi en  <strong>package sur certaines appliances</strong>  (par ex. sur OPNsense/pfSense via des plugins tiers), ce qui peut simplifier son d√©ploiement dans un firewall existant.</p>
</li>
<li>
<p><strong>Contr√¥le granulaire et profils :</strong>  Depuis la version 5,  <strong>Pi-hole</strong>  offre une gestion par groupes de clients : on peut assigner des appareils √† des groupes et appliquer √† chaque groupe des listes de blocage diff√©rentes (par exemple, ne pas bloquer les m√™mes sites pour les enfants et les adultes). AdGuard Home permet √©galement de cr√©er des  <strong>r√®gles par client</strong>  (bas√©es sur l‚ÄôIP ou le nom du client) et de filtrer diff√©remment selon l‚Äôappareil  . La flexibilit√© de Technitium √† ce sujet est encore en d√©veloppement : il supporte bien les listes noires et blanches globales et la cr√©ation de profils, mais  <strong>les r√®gles fines par client/groupe sont plus limit√©es</strong>  pour l‚Äôinstant  . En revanche, Technitium offre des fonctionnalit√©s uniques comme la possibilit√© d‚Äôh√©berger un  <strong>cache DNS partag√© entre r√©seaux</strong>  ou d‚Äôop√©rer un  <strong>serveur racine local</strong>  (il peut t√©l√©charger la zone racine ICANN et agir en r√©solveur totalement autonome hors-ligne si on le souhaite)  .</p>
</li>
</ul>
<p><strong>En r√©sum√©</strong>, Pi-hole et AdGuard Home couvrent l‚Äôessentiel des besoins d‚Äôun homelab en blocage DNS, avec un avantage pour AdGuard sur les fonctionnalit√©s int√©gr√©es (chiffrement DNS, contr√¥le parental) et pour Pi-hole sur la simplicit√© et la communaut√©. Technitium DNS va plus loin en combinant les fonctions de Pi-hole/AdGuard avec celles d‚Äôun serveur DNS professionnel (zones locales, r√©solveur int√©gr√©, etc.)  . Ce surplus de fonctionnalit√©s peut sembler  <em>‚Äúoverkill‚Äù</em>  pour un petit r√©seau, mais offre une  <strong>grande flexibilit√© pour un ing√©nieur s√©curit√©</strong>  souhaitant un laboratoire √©volutif. Le tableau de comparaison suivant (d‚Äôapr√®s Supernetworks) illustre que Technitium couvre la plupart des cases de Pi-hole/AdGuard, et apporte des plus comme le DNS r√©cursif et la gestion multi-r√©seaux  . Le choix d√©pendra donc de vos  <strong>priorit√©s</strong>  : l√©g√®ret√© et support communautaire (Pi-hole), interface moderne et tout-en-un (AdGuard Home), ou puissance DNS maximale (Technitium).</p>
<h2 id="exemples-de-configurations-types"><strong>Exemples de configurations types</strong><a class="headerlink" href="#exemples-de-configurations-types" title="Permanent link">&para;</a></h2>
<p>Pour exploiter ces outils DNS dans un homelab, voici quelques  <strong>architectures types</strong>  et configurations recommand√©es :</p>
<h3 id="configuration-dns-primairesecondaire-pour-resilience"><strong>Configuration ‚ÄúDNS primaire/secondaire‚Äù pour r√©silience</strong><a class="headerlink" href="#configuration-dns-primairesecondaire-pour-resilience" title="Permanent link">&para;</a></h3>
<p>Il est judicieux d‚Äôavoir  <strong>deux instances DNS filtrantes</strong>  pour √©viter un point unique de d√©faillance. Par exemple, d√©ployer  <strong>deux Pi-hole</strong>  (ou AdGuard) sur deux machines distinctes : l‚Äôun sera DNS primaire, le second en DNS secondaire. Via le DHCP, on distribue les deux adresses DNS aux clients. En fonctionnement normal, les clients interrogeront surtout le primaire, le secondaire prenant le relais si le premier est injoignable (timeout). Cette redondance assure que m√™me pendant la maintenance ou la panne d‚Äôun serveur DNS, le r√©seau continue √† r√©soudre les noms  . Il est possible d‚Äôutiliser  <strong>des solutions mixtes</strong> : par ex. un Pi-hole comme serveur principal et un AdGuard Home en secondaire, ce dernier configur√© avec les m√™mes listes de blocage pour un r√©sultat similaire. Certains homelabs combinent aussi  <strong>Technitium et Pi-hole</strong>  : Technitium servant de r√©solveur DNS rapide en interne, et Pi-hole agissant en filtrage en amont pour certains clients sp√©cifiques  . L‚Äôimportant est de conserver une coh√©rence (m√™mes listes) ou de d√©cider que le secondaire ne filtre pas (selon que l‚Äôon pr√©f√®re la  <strong>disponibilit√©</strong>  ou le  <strong>filtrage strict</strong>). Dans tous les cas, r√©glez des  <strong>timeouts raisonnables</strong>  sur le primaire afin que le client bascule vite sur le secondaire en cas de souci (les OS utilisent g√©n√©ralement ~5 secondes par d√©faut).</p>
<p>En environnement virtualis√©, on peut √©galement mettre en place un m√©canisme de  <strong>failover</strong>  plus pouss√© : par exemple ex√©cuter deux conteneurs Pi-hole en parall√®le et utiliser keepalived pour partager une IP virtuelle flottante entre eux. Si le Pi-hole principal tombe, le secondaire annonce l‚ÄôIP virtuelle et prend imm√©diatement le relais, √©vitant m√™me le d√©lai de bascule c√¥t√© clients. Ce type de HA est plus complexe, mais peut se justifier dans un lab critique.</p>
<h3 id="dns-avec-chiffrement-dohdot-en-amont-et-en-interne"><strong>DNS avec chiffrement (DoH/DoT) en amont et en interne</strong><a class="headerlink" href="#dns-avec-chiffrement-dohdot-en-amont-et-en-interne" title="Permanent link">&para;</a></h3>
<p><strong>Chiffrer les requ√™tes DNS</strong>  peut √™tre int√©ressant pour la confidentialit√©. Les trois solutions supportent le chiffrement DNS en  <strong>amont</strong>  (vers les serveurs publics) : Pi-hole peut √™tre coupl√© √† un client DoH/DoT (ex: Cloudflared, Stubby) ou √† Unbound pour chiffrer entre Unbound et les serveurs racine. AdGuard Home et Technitium int√®grent nativement le support des  <strong>DNS-over-HTTPS (DoH)</strong>  et  <strong>DNS-over-TLS (DoT)</strong>  pour les requ√™tes sortantes  . Il suffit de configurer dans l‚ÄôUI l‚Äôadresse du resolver DoH de votre choix (ex :  <em>https://dns.quad9.net/dns-query</em>  pour Quad9).</p>
<p>En  <strong>interne</strong>, AdGuard Home peut aussi se comporter en  <strong>serveur DoH/DoT</strong>  pour vos clients : on peut le configurer pour √©couter en TLS (port 853) ou HTTPS (port 443/API DNS) afin que les postes clients puissent chiffrer leurs requ√™tes jusqu‚Äôau serveur DNS local  . Technitium √©galement permet cette configuration (il peut √©couter en DoH/DoT sur votre r√©seau local si vous activez HTTPS avec un certificat valide). Pi-hole n‚Äôa pas cette fonctionnalit√© int√©gr√©e, mais on peut la reproduire en pla√ßant un  <strong>proxy DoH</strong>  devant Pi-hole (par exemple, un conteneur  <em>cloudflared</em>  configur√© en mode serveur DoH local). Ainsi, les PC/ smartphones du r√©seau peuvent √™tre configur√©s pour utiliser l‚ÄôURL DoH locale (ou le port TLS local) au lieu du port 53 classique, ajoutant une couche de chiffrement sur le segment local pour √©viter qu‚Äôun intrus sur le WiFi ne voie les requ√™tes en clair.</p>
<p>Pour un  <strong>homelab de s√©cu</strong>, cette configuration DoH interne peut √™tre utile pour tester le comportement de machines dans un contexte o√π le DNS est chiffr√© de bout en bout. Cependant, notez que si vos clients utilisent DoH vers l‚Äôext√©rieur (par exemple navigateur configur√© en DoH vers Cloudflare), cela  <strong>contourne</strong>  votre serveur DNS filtrant local. Une solution est justement d‚Äôh√©berger un serveur DoH local (avec AdGuard/Technitium) et de forcer via les politiques du navigateur ou de l‚ÄôOS l‚Äôutilisation de celui-ci, afin de garder le contr√¥le sur les requ√™tes.</p>
<h3 id="mode-proxy-dns-vs-mode-resolveur-local"><strong>Mode ¬´ proxy DNS ¬ª vs mode r√©solveur local</strong><a class="headerlink" href="#mode-proxy-dns-vs-mode-resolveur-local" title="Permanent link">&para;</a></h3>
<p>On parle ici du  <strong>fonctionnement interne</strong>  du serveur DNS filtrant. En  <strong>mode proxy/forwarder</strong>, le serveur relaie la requ√™te vers un ou plusieurs serveurs DNS externes (par ex. les DNS de FAI, Cloudflare, etc.) apr√®s avoir filtr√©. Ce mode est le plus simple :  <strong>Pi-hole</strong>  et  <strong>AdGuard Home</strong>  l‚Äôutilisent par d√©faut (on configure une liste de serveurs DNS en amont, et le logiciel fait du caching + filtrage).  <strong>Technitium DNS</strong>  peut aussi op√©rer ainsi, mais offre en plus le  <strong>mode r√©solveur r√©cursif</strong>  complet : dans ce mode, il va interroger directement la racine internet, puis chaque TLD, etc., sans d√©pendre d‚Äôun serveur tiers.  <strong>Pi-hole</strong>  peut √™tre converti en r√©solveur local en l‚Äôassociant √†  <em>Unbound</em>  (Unbound fait la r√©cursion, Pi-hole filtre le r√©sultat)  .  <strong>AdGuard Home</strong>  a une option exp√©rimentale pour la r√©cursion, mais elle n‚Äôest pas aussi aboutie qu‚ÄôUnbound ou Technitium en termes de fonctionnalit√©s DNSSEC par exemple.</p>
<p><strong>Quel mode choisir ?</strong>  En homelab, le mode forwarder sur DNS publics (Cloudflare/Quad9) avec DoH/DoT est souvent suffisant et facile √† mettre en place. Le  <strong>mode r√©solveur local</strong>  apporte une ind√©pendance totale vis-√†-vis des DNS tiers et √©vite de partager vos requ√™tes √† un service externe, au prix d‚Äôun l√©ger surcro√Æt de trafic (il doit revalider toutes les DNSSEC signatures lui-m√™me, etc.). Un ing√©nieur cybers√©curit√© appr√©ciera le r√©solveur local pour supprimer une d√©pendance externe et contr√¥ler enti√®rement la cha√Æne (ex: pas de risque d‚Äôune r√©ponse alt√©r√©e par un FAI malveillant). Technitium √©tant  <em>‚Äútout-en-un‚Äù</em>, il est id√©al pour tester ce sc√©nario : vous pouvez d√©sactiver toutes les forwarders et le laisser g√©rer la r√©solution r√©cursive  <strong>en interne</strong>  facilement. Pi-hole + Unbound offre le m√™me b√©n√©fice avec un peu plus de configuration manuelle  . Dans tous les cas, v√©rifiez que DNSSEC est bien activ√© sur votre r√©solveur (toutes ces solutions le supportent soit nativement soit via leur upstream) pour garantir l‚Äôauthenticit√© des r√©ponses DNS.</p>
<h3 id="serveur-dns-par-vlan-segmentation-du-dns"><strong>Serveur DNS par VLAN / segmentation du DNS</strong><a class="headerlink" href="#serveur-dns-par-vlan-segmentation-du-dns" title="Permanent link">&para;</a></h3>
<p>Dans un homelab segment√© en  <strong>plusieurs VLAN ou sous-r√©seaux</strong>, il faut d√©cider comment d√©ployer le DNS filtrant :  <strong>centralis√©</strong>  (une instance dessert tous les r√©seaux) ou  <strong>distribu√©</strong>  (une instance par segment).</p>
<ul>
<li>
<p><em>Option centralis√©e :</em>  Vous pouvez faire tourner une seule instance (ex: un Pi-hole sur le LAN principal) et permettre aux autres VLAN d‚Äôy acc√©der. Cela n√©cessite que les requ√™tes DNS des autres r√©seaux soient rout√©es vers le Pi-hole (r√®gles firewall autorisant l‚ÄôUDP/TCP 53 depuis les VLAN IoT/Guest vers l‚ÄôIP du Pi-hole). Sur OPNsense/pfSense, on peut par exemple ouvrir le DNS du Pi-hole √† ces r√©seaux sp√©cifiques. L‚Äôavantage : une seule config √† g√©rer (toutes les listes au m√™me endroit) et une vue globale de l‚Äôactivit√© DNS. Inconv√©nient : moins d‚Äôisolement (les VLAN d√©pendent d‚Äôun service commun) et complexit√© de routage. Il faut aussi que le  <strong>DHCP de chaque VLAN pointe vers le Pi-hole central</strong>  comme DNS.</p>
</li>
<li>
<p><em>Option distribu√©e :</em>  Installer une instance par VLAN. Par ex, un Pi-hole dans le VLAN Perso, un AdGuard Home dans le VLAN IoT. Chaque r√©seau utilise son serveur local (fourni via DHCP). Cela renforce l‚Äôisolation (pas de travers√©e inter-VLAN pour le DNS) et permet de  <strong>personnaliser les filtres par r√©seau</strong>  (ex: VLAN enfants avec filtrage strict via AdGuard Home + SafeSearch activ√©  , VLAN lab sans filtrage ou avec des r√©glages diff√©rents). Technitium facilite aussi une approche interm√©diaire :  <strong>une seule instance multi-VLAN</strong>. En effet il supporte plusieurs adresses d‚Äô√©coute et plusieurs scopes DHCP, on peut donc d√©ployer Technitium sur un serveur ayant acc√®s √† tous les VLAN (ex: une VM multi-hommes ou directement sur OPNsense) et configurer un  <strong>scope DHCP par VLAN</strong>  ainsi que des r√®gles de filtrage par groupe d‚Äôadresses IP. C‚Äôest une architecture puissante mais attention √† la haute dispo : si cette unique instance tombe, tous les VLAN perdent le DNS. On revient alors √† l‚Äôoption primaire/secondaire pour chaque VLAN ou √† un serveur redondant central.</p>
</li>
</ul>
<p>En pratique, une approche hybride convient souvent : par exemple un Pi-hole principal sur le LAN Perso, accessible aussi par le VLAN invit√© mais avec une r√®gle firewall qui redirige toute requ√™te DNS √©mise depuis le VLAN invit√© vers le Pi-hole (on peut m√™me forcer via une redirection NAT DNS). En parall√®le, on peut d√©ployer un second DNS (AdGuard) d√©di√© aux VLAN sensibles (IoT, etc.) pour bien cloisonner.  <strong>Le choix d√©pend de la taille du lab et des exigences de s√©curit√©</strong>  : plus on centralise, plus c‚Äôest facile √† administrer mais plus impactant en cas de panne ; plus on distribue, plus on segmente les risques mais plus il y a d‚Äôinstances √† maintenir.</p>
<h2 id="scenarios-specifiques-dusage-en-homelab"><strong>Sc√©narios sp√©cifiques d‚Äôusage en homelab</strong><a class="headerlink" href="#scenarios-specifiques-dusage-en-homelab" title="Permanent link">&para;</a></h2>
<p>Apr√®s la technique, voici quelques  <strong>cas d‚Äôusage concrets</strong>  de ces solutions DNS dans un homelab orient√© cybers√©curit√© :</p>
<h3 id="blocage-des-publicites-et-du-tracking-internet"><strong>Blocage des publicit√©s et du tracking internet</strong><a class="headerlink" href="#blocage-des-publicites-et-du-tracking-internet" title="Permanent link">&para;</a></h3>
<p>Le cas d‚Äôusage num√©ro un de Pi-hole/AdGuard est le  <strong>blocage des pubs et trackers</strong>  au niveau r√©seau. En configurant l‚Äôun de ces serveurs comme DNS principal du r√©seau,  <em>toutes</em>  les requ√™tes vers des domaines publicitaires connus sont r√©solues vers une adresse inexistante (0.0.0.0) ou simplement non r√©solues, ce qui emp√™che l‚Äôaffichage des pubs sur les appareils (TV connect√©es, smartphones, etc.) sans avoir √† configurer chaque appareil individuellement  . Dans un homelab, cela permet non seulement d‚Äôacc√©l√©rer la navigation (moins de contenu charg√©) mais aussi de r√©duire les vecteurs de suivi invisibles.  <strong>AdGuard Home</strong>  et  <strong>Pi-hole</strong>  disposent tous deux de listes de filtres maintenues par la communaut√© pour bloquer pub, trackers de t√©l√©m√©trie Windows, banni√®res cookies, etc. Par d√©faut, leurs listes basiques bloquent une bonne partie des pubs courantes, mais on peut les enrichir (EasyList, listes sp√©cifiques locales, etc.)  .  <strong>Technitium</strong>  utilisera les m√™mes listes (format hosts, DOM blocklist) ‚Äì il suffit d‚Äôimporter les URLs des listes dans son interface. Un avantage du DNS centralis√© : on peut bloquer la pub  <strong>m√™me sur les appareils qui n‚Äôacceptent pas d‚Äôextensions</strong>  (TV, consoles, IoT).</p>
<p>Pour un lab de s√©cu, on peut aussi se servir de ces blocages DNS comme premi√®re barri√®re contre certaines menaces : par exemple, en chargeant des listes de domaines de malware connus (EmergingThreats, etc.), on emp√™che des malwares  <em>√©ventuellement ex√©cut√©s dans le lab</em>  de contacter leur serveur de commande via DNS. Bien s√ªr, ce n‚Äôest pas infaillible (un malware peut contacter directement une IP), mais cela couvre les  <strong>C&amp;C bas√©s sur domaine</strong>  et le tracking de certaines applications indiscr√®tes  . On peut pousser plus loin le principe en activant sur AdGuard des listes de type  <em>‚ÄúSafe Browsing‚Äù</em>  ou contr√¥le parental (bloquer les domaines adultes, jeux d‚Äôargent, etc.)  ‚Äì utile si le homelab sert de r√©seau familial √©galement.</p>
<p>Un sc√©nario fr√©quent en homelab est de  <strong>mesurer l‚Äôefficacit√© de ces listes</strong>  : Pi-hole et AdGuard fournissent des statistiques (pourcentage de requ√™tes bloqu√©es, domaines les plus bloqu√©s, etc.)  . Cela permet √† un passionn√© de cybers√©curit√© d‚Äôanalyser quel trafic sort de son r√©seau. Par exemple, on peut d√©couvrir qu‚Äôune Smart TV tente de contacter  <em>dozens</em>  de domaines de tracking diff√©rents ‚Äì et ajuster les r√®gles en cons√©quence. On pourra aussi tester diff√©rentes approches : par exemple comparer  <strong>Pi-hole vs NextDNS</strong>  (service cloud) sur le blocage de pubs, ou combiner Pi-hole avec un  <strong>bloqueur de contenu local</strong>  sur le navigateur et voir la diff√©rence. Ce type d‚Äôexp√©rimentation est courant en homelab pour √©valuer la meilleure protection multicouche.</p>
<h3 id="isolation-reseau-par-le-dns-iot-et-environnements-sensibles"><strong>Isolation r√©seau par le DNS (IoT et environnements sensibles)</strong><a class="headerlink" href="#isolation-reseau-par-le-dns-iot-et-environnements-sensibles" title="Permanent link">&para;</a></h3>
<p>Dans une architecture de s√©curit√©, le DNS peut servir √†  <strong>isoler ou contr√¥ler les communications</strong>  d‚Äôun segment donn√©. Prenons le VLAN IoT : on souhaite qu‚Äôil n‚Äôait acc√®s qu‚Äô√† Internet de mani√®re tr√®s limit√©e, pour √©viter qu‚Äôun objet compromis n‚Äôattaque d‚Äôautres machines. En plus des r√®gles firewall restreignant les destinations IP, on peut utiliser un serveur DNS filtrant d√©di√© √† ce VLAN avec une politique tr√®s stricte. Par exemple, d√©ployer AdGuard Home pour le VLAN IoT avec  <em>uniquement</em>  une whitelist de domaines autoris√©s (les serveurs officiels des appareils connus) et bloquer  <strong>tout le reste</strong>. AdGuard Home permet de cr√©er des r√®gles globales ou par client, donc on pourrait dire ‚Äúautoriser seulement ces domaines pour les IP des cam√©ras, etc.‚Äù. Technitium, via des zones de transfert conditionnel et surcharges, peut m√™me renvoyer un nom de domaine vers une IP locale factice pour pi√©ger l‚Äôappareil ou emp√™cher la r√©solution.</p>
<p>Un autre sc√©nario d‚Äôisolation DNS est d‚Äôemp√™cher qu‚Äôun service en  <strong>zone DMZ compromise ne puisse appeler l‚Äôint√©rieur</strong>  : on pourrait configurer le DNS de la DMZ pour qu‚Äôil  <em>ne r√©solve pas</em>  les noms internes du LAN. Par exemple, Technitium h√©bergeant la zone ‚Äúlab.internal‚Äù pour le LAN, mais n‚Äôautorisant pas les requ√™tes venant de la DMZ √† y acc√©der (via un contr√¥le d‚Äôacc√®s sur la zone ou en n‚Äôexposant pas ce serveur DNS √† la DMZ). Ou plus simplement, avoir des DNS s√©par√©s physiquement : le DNS du LAN conna√Æt les noms du LAN, celui de la DMZ non. Ainsi, si un serveur DMZ est compromis, il ne pourra pas facilement d√©couvrir ni contacter par nom les machines internes. On parle parfois de  <strong>DNS split-horizon</strong>  pour la s√©curit√© : pr√©senter une vue DNS diff√©rente selon l‚Äôorigine de la requ√™te. Technitium DNS peut g√©rer ce genre de choses en cr√©ant des  <strong>zones avec port√©e</strong>  (views) ou en combinant des zones locales et des forwarders conditionnels. Pi-hole et AdGuard ne g√®rent pas des ‚Äúviews‚Äù multiples, mais on peut en d√©ployer un par zone de s√©curit√© pour obtenir un effet similaire.</p>
<p>Enfin,  <em>isoler par DNS</em>  peut signifier  <strong>bloquer toute r√©solution externe non autoris√©e</strong>  : un principe de base est de forcer les clients √† n‚Äôutiliser  <em>que le DNS filtrant</em>. Sur OPNsense/pfSense, on impl√©mente une r√®gle NAT qui intercepte toute requ√™te DNS UDP/53 sortante et la redirige vers le serveur DNS local (Pi-hole) ‚Äì on s‚Äôassure ainsi qu‚Äôaucun appareil ne tente de bypasser le filtre en utilisant 8.8.8.8. Cette technique combin√©e avec un Pi-hole/AdGuard renforce √©norm√©ment le contr√¥le : m√™me un appareil malveillant configur√© avec un DNS dur en dur sera oblig√© de passer par le filtre.  <strong>Attention</strong>toutefois aux DNS over HTTPS des applications : ceux-ci ne passant pas par le port 53, il faut les bloquer au firewall (ex: bloquer les requ√™tes vers les domaines connus de DoH publics) ou mettre en place votre propre DoH interceptant comme √©voqu√© plus haut.</p>
<h3 id="dns-split-pour-lab-interne-dns-interne-vs-externe"><strong>DNS ¬´ split ¬ª pour lab interne (DNS interne vs externe)</strong><a class="headerlink" href="#dns-split-pour-lab-interne-dns-interne-vs-externe" title="Permanent link">&para;</a></h3>
<p>Le concept de  <strong>split-horizon DNS</strong>  s‚Äôapplique particuli√®rement dans un homelab o√π l‚Äôon peut avoir des services accessibles √† la fois depuis l‚Äôint√©rieur et l‚Äôext√©rieur. Supposons que vous h√©bergez un site web  <em>monlab.fr</em>  qui a une IP publique (pour y acc√©der depuis Internet) et une IP priv√©e (acc√®s depuis le LAN sans sortir). Vous souhaitez que les machines internes utilisent l‚ÄôIP priv√©e quand elles r√©solvent  <em>monlab.fr</em>, tandis que le public doit voir l‚ÄôIP publique. Ceci peut √™tre r√©alis√© avec nos serveurs DNS :</p>
<ul>
<li>
<p>Avec  <strong>Pi-hole/AdGuard</strong>, la m√©thode courante est d‚Äôajouter une entr√©e DNS locale pour  <em>monlab.fr</em>  pointant vers l‚ÄôIP priv√©e. Pi-hole offre l‚Äôajout d‚Äôun enregistrement A manuel dans ‚ÄúDNS Local‚Äù et AdGuard via les  <em>custom rules</em>  . Ainsi, quand un client du LAN demande  <em>monlab.fr</em>, le serveur DNS local lui donne directement l‚ÄôIP priv√©e. Pour les clients externes (qui n‚Äôinterrogent pas votre DNS local), ils continueront d‚Äôaller vers le DNS public et recevront l‚ÄôIP publique ‚Äì s√©paration de vue accomplie.</p>
</li>
<li>
<p>Avec  <strong>Technitium</strong>, on peut aller plus loin en d√©finissant  <em>monlab.fr</em>  comme zone locale faisant autorit√© dans le DNS interne. Vous cr√©ez la zone  <em>monlab.fr</em>  dans Technitium avec vos enregistrements priv√©s. Ensuite, pour que les requ√™tes externes continuent de fonctionner, Technitium peut soit ne pas √™tre expos√© √† l‚Äôext√©rieur, soit √™tre configur√© pour forwarder ce domaine vers le DNS public comme  <em>forwarder conditionnel</em>,  <strong>tout en ayant des overrides</strong>  : par exemple, vous pouvez d√©finir dans la zone locale un enregistrement sp√©cifique qui outrepasse la r√©ponse publique (comme pointer  <em>monlab.fr</em>  vers priv√©) et laisser le reste passer. Technitium excelle dans ce r√¥le de DNS split-horizon gr√¢ce √† sa capacit√© de g√©rer √† la fois de l‚Äôautoritatif et du r√©cursif dans une seule instance  .</p>
</li>
</ul>
<p>Ce  <strong>DNS split</strong>  est tr√®s utile en homelab pour les VPN aussi : quand vous √™tes connect√© en VPN dans votre r√©seau, vous voulez peut-√™tre que  <em>wiki.lan</em>  se r√©solve, mais pas quand vous √™tes √† l‚Äôext√©rieur. En configurant votre Pi-hole/AdGuard interne pour r√©soudre <em>.lan ou </em>.home.arpa, et en le combinant avec une configuration du client VPN pour utiliser ce DNS, vous obtenez une r√©solution locale des noms √† travers le VPN. Technitium pourrait lui √™tre le serveur central qui r√©pond diff√©remment selon l‚ÄôIP source (par exemple, si requ√™te vient d‚Äôune IP du VPN, autoriser certains noms).</p>
<p>En r√©sum√©, ces sc√©narios montrent que  <strong>un serveur DNS homelab ne sert pas qu‚Äô√† bloquer des pubs</strong>, mais peut √™tre un √©l√©ment central de la s√©curit√© r√©seau : il contribue √† la  <strong>d√©tection</strong>  (en journalisant quelles adresses sont requ√™t√©es), √† la  <strong>protection</strong>  (en bloquant ou redirigeant certaines requ√™tes) et √† la  <strong>flexibilit√©</strong>  (en offrant des vues DNS diff√©rentes selon le contexte). Cela permet de  <strong>simuler des environnements pro</strong>  (DNS d‚Äôentreprise avec domaines internes, zones externes, etc.) √† la maison.</p>
<h2 id="securite-mises-a-jour-et-resilience-du-service-dns"><strong>S√©curit√©, mises √† jour et r√©silience du service DNS</strong><a class="headerlink" href="#securite-mises-a-jour-et-resilience-du-service-dns" title="Permanent link">&para;</a></h2>
<h3 id="securite-de-linstance-dns"><strong>S√©curit√© de l‚Äôinstance DNS</strong><a class="headerlink" href="#securite-de-linstance-dns" title="Permanent link">&para;</a></h3>
<p>Du point de vue s√©curitaire, il faut consid√©rer  <strong>la s√©curit√© du logiciel DNS lui-m√™me</strong>  et son  <strong>int√©gration s√ªre dans le r√©seau</strong>. Pi-hole et AdGuard Home sont √©crits dans des langages robustes (C/PHP pour l‚Äôun, Go pour l‚Äôautre) et b√©n√©ficient de mises √† jour r√©guli√®res en cas de vuln√©rabilit√©. Jusqu‚Äôici, aucune faille majeure publique n‚Äôa compromis ces outils de fa√ßon catastrophique, mais il est arriv√© que Pi-hole corrige des bugs de corruption de m√©moire ou XSS dans l‚Äôinterface. Technitium DNS est relativement r√©cent mais √©crit en .NET (langage m√©moire-safe)  , ce qui limite certaines cat√©gories de vuln√©rabilit√©s.  <strong>Le principal risque</strong>  est l‚Äô<strong>exposition involontaire</strong>  de l‚Äôinterface web d‚Äôadministration. Il est imp√©ratif de  <strong>la prot√©ger</strong>  : par d√©faut Pi-hole n‚Äôa pas d‚ÄôHTTPS sur son UI (on peut le mettre derri√®re un proxy HTTPS si besoin)  , AdGuard Home et Technitium peuvent activer HTTPS sur l‚Äôinterface plus facilement (certificat √† installer)  . Dans tous les cas, il faut restreindre l‚Äôacc√®s de l‚ÄôUI aux seules IP autoris√©es (via firewall ou en √©coutant seulement sur l‚ÄôIP locale). √âvitez d‚Äôexposer l‚Äôinterface de gestion sur Internet. Si vous devez acc√©der √† distance, faites-le via VPN dans votre homelab ou SSH tunnel.</p>
<p>Concernant la  <strong>s√©paration des r√¥les</strong>, veillez √† ce que le serveur DNS n‚Äôait pas plus de privil√®ges que n√©cessaire sur le syst√®me. Par exemple, en Docker il tourne g√©n√©ralement en utilisateur non-root. Sur une machine d√©di√©e, ne pas l‚Äôex√©cuter en root (Pi-hole installe un utilisateur  pihole  pour FTL, etc.). Gardez √©galement votre syst√®me √† jour ‚Äì surtout si c‚Äôest un Linux minimal type Raspberry Pi OS, pour b√©n√©ficier des patchs de s√©curit√© du kernel, etc.</p>
<p><strong>Mises √† jour automatiques :</strong>  Par design, Pi-hole  <strong>n‚Äôauto-met pas √† jour son core</strong>  tout seul (on utilise la commande  pihole -up  manuellement ou on met √† jour le conteneur Docker). Idem pour Technitium et AdGuard ‚Äì ces services ne se mettent pas √† jour automatiquement comme pourraient le faire des applications cloud. Il faut donc un processus pour les maintenir (veillez aux annonces de nouvelles versions). En revanche,  <strong>les listes de blocage</strong>, elles, sont souvent  <strong>mises √† jour automatiquement</strong>. Pi-hole programme un rafra√Æchissement hebdomadaire de Gravity (les listes) par d√©faut via cron. AdGuard Home, de son c√¥t√©, v√©rifie et met √† jour les filtres abonn√©s r√©guli√®rement (p√©riodicit√© configurable, souvent quotidienne) ‚Äì il a un avantage l√†-dessus en offrant une interface pour g√©rer la fr√©quence  . Technitium peut √™tre configur√© pour fetcher les listes √† intervalle √©galement (sinon on peut scripter un cron avec son API). Il est crucial de garder les listes √† jour pour b√©n√©ficier des nouveaux domaines malveillants √† bloquer. Pour le core, je vous conseille d‚Äôint√©grer la v√©rification des updates de ces services dans votre routine (par exemple, check mensuel, ou s‚Äôabonner aux flux GitHub des projets). Sur la s√©curit√© du code lui-m√™me, Pi-hole a l‚Äôavantage d‚Äôune  <strong>tr√®s large communaut√©</strong>  qui audite et contribue, AdGuard Home a une √©quipe d√©di√©e (soci√©t√© AdGuard) et Technitium est principalement maintenu par une petite √©quipe mais tr√®s r√©active  .</p>
<h3 id="journalisation-et-respect-de-la-vie-privee"><strong>Journalisation et respect de la vie priv√©e</strong><a class="headerlink" href="#journalisation-et-respect-de-la-vie-privee" title="Permanent link">&para;</a></h3>
<p>Un serveur DNS filtrant va naturellement  <strong>journaliser</strong>  beaucoup d‚Äôinformations : chaque requ√™te client, l‚Äôadresse qui l‚Äôa faite, la r√©ponse retourn√©e, etc. Cela peut poser question dans un contexte personnel (respect de la vie priv√©e des usagers du r√©seau, par exemple votre famille) ou tout simplement encombrer le stockage √† long terme.</p>
<p><strong>Par d√©faut</strong>, Pi-hole et AdGuard loggent toutes les requ√™tes dans une base (FTL DB pour Pi-hole, fichiers log/DB pour AdGuard). On peut voir l‚Äôhistorique via l‚Äôinterface (requ√™tes des derni√®res 24h, 7j, etc.).  <strong>Pi-hole propose un mode de confidentialit√© r√©glable</strong>  : du log complet √†  <em>aucune journalisation</em>, en passant par des niveaux interm√©diaires o√π il anonymise partiellement (par ex. ne pas stocker l‚Äôadresse IP du client, ou ne pas stocker les domaines consult√©s)  . Cela permet si on le souhaite de r√©duire la granularit√© des logs ‚Äì utile si vous h√©bergez Pi-hole pour un tiers et que vous ne voulez pas conserver ses requ√™tes. AdGuard Home a √©galement une option ‚ÄúMode furtif‚Äù (<em>stealth mode</em>) qui peut limiter ce qui est consign√© et m√™me bloquer les requ√™tes aux domaines typiques de t√©l√©m√©trie. On peut aussi purger automatiquement les journaux au bout d‚Äôun certain temps dans AdGuard. Technitium DNS, au moins dans sa version actuelle, a une interface de log un peu moins d√©velopp√©e  , mais les donn√©es sont bien l√† (fichiers logs et/ou base SQL). Rien ne vous emp√™che d‚Äôenvoyer les logs DNS vers un SIEM local (Splunk, Elastic) pour analyser le trafic ‚Äì c‚Äôest m√™me un excellent exercice en homelab Blue Team. Cependant, faites attention :  <strong>ne pas logguer trop longtemps</strong>  sur SD card (si vous utilisez un Pi) pour √©viter son usure, et filtrer ce qui est pertinent.</p>
<p>Un aspect ‚Äúvie priv√©e‚Äù important :  <strong>aucune de ces solutions n‚Äôenvoie vos donn√©es DNS √† l‚Äô√©diteur</strong>  (tout est self-hosted, local)  .  <em>Seul AdGuard Home utilisait par d√©faut les serveurs DNS d‚ÄôAdGuard</em>  en upstream lors de l‚Äôinstallation (modifiable bien s√ªr)  . Donc par transparence, sachez qu‚Äôapr√®s installation, il vaut mieux configurer explicitement vos serveurs DNS pr√©f√©r√©s plut√¥t que de laisser ceux par d√©faut (si on veut √©viter que AdGuard (la compagnie) connaisse vos requ√™tes). Pi-hole et Technitium n‚Äôont pas ce genre de particularit√© : ils utilisent ce que vous leur indiquez (ou rien, dans le cas d‚Äôun r√©solveur pur).</p>
<h3 id="resilience-du-service-dns-et-optimisation"><strong>R√©silience du service DNS et optimisation</strong><a class="headerlink" href="#resilience-du-service-dns-et-optimisation" title="Permanent link">&para;</a></h3>
<p>La  <strong>r√©silience</strong>  englobe la haute disponibilit√© (disponibilit√© du service) et la robustesse face aux lenteurs. Comme √©voqu√© dans la section config, disposer de plusieurs DNS redondants est la meilleure parade contre une panne franche. Mais on peut aussi am√©liorer la  <strong>tol√©rance aux √©checs</strong>  dans la configuration m√™me d‚Äôune instance. Par exemple, dans Pi-hole/AdGuard, configurer  <em>plusieurs serveurs DNS upstream</em>  (DNS de secours) permet qu‚Äôen cas de silence d‚Äôun des serveurs (ex: Cloudflare ne r√©pond plus), l‚Äôautre soit essay√©. AdGuard Home offre m√™me des strat√©gies (parall√®le, priorit√©, etc.) pour interroger plusieurs upstreams en m√™me temps et prendre le plus rapide ou √©liminer celui qui ne r√©pond pas.  <strong>Technitium DNS</strong>  √©tant un r√©solveur complet, il va g√©rer la redondance au niveau du protocole DNS lui-m√™me (plusieurs serveurs racine, etc.), mais si vous configurez des forwarders manuels, pensez aussi √† en mettre plusieurs.</p>
<p>Le  <strong>timeout DNS</strong>  par d√©faut est de quelques secondes, mais vous pouvez l‚Äôajuster si vous constatez des retards. Toutefois, attention √† ne pas le rendre trop court et d√©clarer en √©chec trop vite des domaines pouvant n√©cessiter un peu plus de temps (DNSSEC validation par exemple).</p>
<p>Un point de r√©silience est la  <strong>caching</strong>  : heureusement, tous les trois poss√®dent un cache local des r√©ponses DNS. Ainsi, si votre lien Internet tombe temporairement, les noms r√©cemment r√©solus restent dans le cache pour la dur√©e du TTL, permettant aux appareils de continuer √† fonctionner pour les domaines d√©j√† connus. Vous pouvez augmenter la taille du cache si vous avez beaucoup de clients, mais g√©n√©ralement les valeurs par d√©faut suffisent (Pi-hole FTL et AdGuard g√®rent √ßa automatiquement). Technitium vous laissera ajuster certains param√®tres DNS avanc√©s (taille cache, etc.) si besoin.</p>
<p>Enfin, du point de vue  <em>cybers√©curit√©</em>, on peut parler de la  <strong>r√©silience face aux attaques DNS</strong>  : un homelab pourrait √™tre la cible d‚Äôune attaque DNS (ex: un malware interne fait des millions de requ√™tes pour saturer Pi-hole). Pi-hole et AdGuard ont des m√©canismes basiques de rate-limiting pour √©viter qu‚Äôun client unique spame trop de requ√™tes et ne submerge le service. Par exemple Pi-hole limite √† 1000 requ√™tes par minute par client par d√©faut (configurable) ‚Äì cela √©vite qu‚Äôun IoT bavard ne rende le DNS indisponible pour tout le monde. Sur Technitium, je ne suis pas s√ªr du taux par d√©faut, mais √©tant un serveur plus sophistiqu√©, il doit pouvoir encaisser pas mal de charges (voire on peut utiliser les fonctionnalit√©s de Windows/.NET if it runs on Windows to mitigate abuse). Dans tous les cas, surveillez vos tableaux de bord : si vous voyez qu‚Äôun appareil fait 10 000 requ√™tes/jour, il y a un souci (boucle DNS, etc.) qu‚Äôil faut corriger pour ne pas impacter la qualit√© de service DNS.</p>
<p>En r√©sum√©, la mise en place d‚Äôun DNS filtrant dans un homelab de s√©curit√© apporte non seulement un confort (moins de pubs) mais fait partie int√©grante de la  <strong>d√©fense en profondeur</strong>  du r√©seau domestique. Avec Pi-hole, AdGuard Home ou Technitium DNS, on dispose d‚Äôoutils modulables qu‚Äôil faut configurer selon les besoins : n‚Äôh√©sitez pas √† exp√©rimenter diff√©rentes topologies et r√©glages pour trouver l‚Äô√©quilibre optimal entre  <strong>s√©curit√©</strong>,  <strong>performance</strong>  et  <strong>simplicit√© de gestion</strong>  . Chaque solution a ses points forts, mais toutes visent le m√™me objectif : donner √† l‚Äôutilisateur le contr√¥le sur ses r√©solutions DNS afin de s√©curiser le r√©seau contre une partie des menaces et nuisances en ligne. Les retours d‚Äôexp√©rience conseillent m√™me d‚Äô<strong>tester plusieurs solutions en parall√®le</strong>  et d‚Äôadopter celle qui vous convient le mieux en termes d‚Äôinterface et de fonctionnalit√©s  .</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.expand", "toc.integrate", "content.code.annotate", "search.highlight", "search.suggest"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>